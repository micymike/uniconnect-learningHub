const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-EE66Hqjx.js","assets/ui-BP7bQmCi.js","assets/vendor-SlK7pBj5.js","assets/router-BaxVh4Vf.js","assets/charts-VS_07KUV.js","assets/markdown-bYf6j3e6.js","assets/web-BsG998Ne.js"])))=>i.map(i=>d[i]);
import{j as e,A as t,m as s,L as a,y as r}from"./ui-BP7bQmCi.js";import{b as n,r as i,a as o}from"./vendor-SlK7pBj5.js";import{L as l,u as c,a as d,b as m,N as h,O as x,B as u,R as g,c as p,d as f}from"./router-BaxVh4Vf.js";import{R as b,P as y,a as v,C as j,T as w}from"./charts-VS_07KUV.js";import{M as N,_ as k}from"./markdown-bYf6j3e6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var S={},C=n;S.createRoot=C.createRoot,S.hydrateRoot=C.hydrateRoot;const _=()=>{const[t,s]=i.useState([]),[a,r]=i.useState([]),[n,o]=i.useState(!0),[l,c]=i.useState(null),[d,m]=i.useState(""),[h,x]=i.useState("all");return i.useEffect(()=>{fetch("http://localhost:3004/api/courses",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{if(!e.ok)throw new Error("Failed to fetch courses");return e.json()}).then(e=>{s(e),r(e),o(!1)}).catch(e=>{c(e.message||"Unknown error"),o(!1)})},[]),i.useEffect(()=>{let e=t.filter(e=>e.title.toLowerCase().includes(d.toLowerCase())||e.description&&e.description.toLowerCase().includes(d.toLowerCase()));"all"!==h&&(e=e.filter(e=>"published"===h?e.published:!e.published)),r(e)},[d,h,t]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 px-4 py-6",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2 flex items-center",children:[e.jsx("i",{className:"bx bx-library text-orange-500 mr-3"}),"Course Library"]}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Explore and manage your learning content"})]}),e.jsxs("div",{className:"mb-8 animate-fade-in-up animation-delay-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:d,onChange:e=>m(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 transition-colors"})]}),e.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"All"},{key:"published",label:"Published"},{key:"draft",label:"Draft"}].map(t=>e.jsx("button",{onClick:()=>x(t.key),className:"px-4 py-3 rounded-xl font-medium transition-all duration-300 "+(h===t.key?"bg-orange-500 text-white shadow-lg transform scale-105":"bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white"),children:t.label},t.key))})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Courses",value:t.length,icon:"bx bx-book",color:"text-blue-500"},{label:"Published",value:t.filter(e=>e.published).length,icon:"bx bx-check-circle",color:"text-green-500"},{label:"Draft",value:t.filter(e=>!e.published).length,icon:"bx bx-edit",color:"text-yellow-500"},{label:"Total Modules",value:t.reduce((e,t)=>{var s;return e+((null==(s=t.modules)?void 0:s.length)||0)},0),icon:"bx bx-collection",color:"text-purple-500"}].map((t,s)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700 animate-fade-in-up",style:{animationDelay:100*(s+2)+"ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:`${t.icon} text-2xl ${t.color}`}),e.jsx("span",{className:"text-2xl font-bold text-white",children:t.value})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.label})]},t.label))})]}),n&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading courses..."})]}),l&&e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-6 py-4 rounded-xl mb-6 flex items-center animate-fade-in-up",children:[e.jsx("i",{className:"bx bx-error-circle text-2xl mr-3"}),e.jsx("span",{children:l})]}),!n&&!l&&0===a.length&&e.jsxs("div",{className:"text-center py-20 animate-fade-in-up",children:[e.jsx("i",{className:"bx bx-book-open text-6xl text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:d||"all"!==h?"No courses match your criteria":"No courses available"}),e.jsx("p",{className:"text-gray-400",children:d||"all"!==h?"Try adjusting your search or filter":"Start by creating your first course"})]}),!n&&!l&&a.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in-up animation-delay-600",children:a.map((t,s)=>{var a;return e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 hover:border-orange-500 transition-all duration-300 transform hover:scale-105 hover:shadow-2xl group animate-fade-in-up",style:{animationDelay:100*(s+6)+"ms"},children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-orange-500 bg-opacity-20 p-3 rounded-lg",children:e.jsx("i",{className:"bx bx-book-open text-2xl text-orange-500"})}),e.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full "+(t.published?"bg-green-500 bg-opacity-20 text-green-400 border border-green-500":"bg-yellow-500 bg-opacity-20 text-yellow-400 border border-yellow-500"),children:t.published?"Published":"Draft"})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-3 group-hover:text-orange-500 transition-colors",children:t.title}),t.description&&e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"bx bx-collection mr-1"}),e.jsxs("span",{children:[(null==(a=t.modules)?void 0:a.length)||0," modules"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"bx bx-time mr-1"}),e.jsxs("span",{children:[Math.floor(10*Math.random())+1,"h ",Math.floor(60*Math.random()),"m"]})]})]})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 flex items-center justify-center group",children:[e.jsx("span",{children:"View Course"}),e.jsx("i",{className:"bx bx-right-arrow-alt ml-2 text-lg group-hover:translate-x-1 transition-transform"})]})})]},t._id)})})]})},A=()=>{const[t,s]=i.useState({x:0,y:0}),[a,r]=i.useState({}),n=i.useRef(null),o=i.useRef(null);i.useEffect(()=>{const e=e=>{s({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),i.useEffect(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate")})},{threshold:.1});return document.querySelectorAll("[data-animate]").forEach(t=>e.observe(t)),()=>e.disconnect()},[]);return e.jsxs("div",{className:"min-h-screen bg-black text-white overflow-hidden relative",children:[e.jsxs("div",{className:"fixed inset-0 z-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-gray-900 to-black"}),e.jsx("div",{className:"absolute w-96 h-96 bg-gradient-to-r from-orange-500/30 to-orange-600/30 rounded-full blur-3xl animate-pulse",style:{left:t.x-192,top:t.y-192,transition:"all 0.3s ease-out"}}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-gradient-to-r from-orange-400/20 to-orange-500/20 rounded-full blur-2xl animate-bounce"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-r from-orange-600/20 to-orange-700/20 rounded-full blur-2xl animate-pulse"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-72 h-72 bg-gradient-to-r from-white/5 to-orange-300/10 rounded-full blur-3xl animate-float"})]}),e.jsx("div",{className:"fixed inset-0 z-0",children:[...Array(50)].map((t,s)=>e.jsx("div",{className:"absolute w-1 h-1 rounded-full animate-ping "+(s%3==0?"bg-orange-400/40":s%3==1?"bg-white/20":"bg-orange-300/30"),style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:2+3*Math.random()+"s"}},s))}),e.jsxs("header",{className:"relative z-10 w-full py-6 px-4 flex flex-col gap-4 sm:gap-0 sm:flex-row items-center justify-between backdrop-blur-sm bg-black/20 border-b border-orange-500/20",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight bg-gradient-to-r from-orange-400 via-orange-500 to-white bg-clip-text text-transparent animate-shimmer",children:"UniConnect Learning Hub"}),e.jsx("p",{className:"mt-2 text-base sm:text-lg md:text-2xl text-gray-300 animate-fade-in-up",children:"Next-Generation AI-Powered Learning Platform"})]}),e.jsxs(l,{to:"/login",className:"group relative w-full sm:w-auto mt-4 sm:mt-0 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-4 px-8 rounded-2xl shadow-2xl transition-all duration-300 transform hover:scale-105 hover:shadow-orange-500/50 text-center overflow-hidden animate-glow",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userRole"),localStorage.removeItem("user")},children:[e.jsx("span",{className:"relative z-10",children:"Get Started"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-orange-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),e.jsxs("section",{ref:n,className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4 text-center",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs("h2",{className:"text-4xl sm:text-6xl md:text-8xl font-bold mb-8 leading-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-orange-500 via-orange-400 to-white bg-clip-text text-transparent animate-pulse neon-glow",children:"UniConnect Learning Hub"}),e.jsx("br",{}),e.jsx("span",{className:"block mt-4 text-3xl sm:text-4xl md:text-5xl font-semibold bg-gradient-to-r from-white via-orange-300 to-orange-500 bg-clip-text text-transparent animate-shimmer",children:"Learning is Here"})]})}),e.jsx("div",{className:"animate-fade-in-up animation-delay-300",children:e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-gray-300 mb-12 max-w-4xl mx-auto leading-relaxed",children:"Experience revolutionary AI-powered education with multimodal learning, intelligent analytics, and personalized study assistance"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 animate-fade-in-up animation-delay-600",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500/10 to-black/50 backdrop-blur-lg rounded-3xl p-8 border border-orange-500/30 hover:border-orange-400/70 transition-all duration-500 transform hover:scale-105 hover:-translate-y-2 hover:rotate-1 animate-float",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸ¤–"}),e.jsx("h3",{className:"text-2xl font-bold mb-4 text-orange-300 group-hover:text-white transition-colors duration-300",children:"AI Assistant"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Voice, text, and image-powered learning companion"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-transparent rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-white/5 to-black/50 backdrop-blur-lg rounded-3xl p-8 border border-white/20 hover:border-orange-400/70 transition-all duration-500 transform hover:scale-105 hover:-translate-y-2 hover:rotate-1 animate-float animation-delay-300",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-2xl font-bold mb-4 text-white group-hover:text-orange-300 transition-colors duration-300",children:"Smart Analytics"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Predictive insights and performance tracking"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-600/10 to-black/50 backdrop-blur-lg rounded-3xl p-8 border border-orange-600/30 hover:border-orange-400/70 transition-all duration-500 transform hover:scale-105 hover:-translate-y-2 hover:rotate-1 animate-float animation-delay-600",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸŽ¯"}),e.jsx("h3",{className:"text-2xl font-bold mb-4 text-orange-400 group-hover:text-white transition-colors duration-300",children:"Personalized"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Adaptive learning paths tailored to you"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600/5 to-transparent rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})]}),e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:e.jsx("div",{className:"w-6 h-10 border-2 border-orange-400/50 rounded-full flex justify-center",children:e.jsx("div",{className:"w-1 h-3 bg-orange-500 rounded-full mt-2 animate-pulse"})})})]}),e.jsx("section",{ref:o,className:"relative z-10 py-20 px-4",id:"features","data-animate":!0,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsx("h2",{className:"text-4xl sm:text-6xl font-bold mb-8 bg-gradient-to-r from-orange-400 via-white to-orange-500 bg-clip-text text-transparent neon-glow",children:"Powerful Features"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Discover the comprehensive suite of tools designed to revolutionize your learning experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:"ðŸŽ“",title:"AI-Powered Learning",description:"Advanced AI study assistant with multimodal support, voice interaction, and personalized learning paths",delay:"0ms"},{icon:"ðŸ“š",title:"Smart Study Tools",description:"Flashcard generation, note enhancement, PDF analysis, and intelligent study scheduling",delay:"200ms"},{icon:"ðŸ§ ",title:"Intelligent Analytics",description:"Grade prediction, progress tracking, learning analytics, and performance insights",delay:"400ms"},{icon:"ðŸ¤",title:"Collaborative Learning",description:"Study group matching, peer collaboration, and social learning features",delay:"600ms"},{icon:"ðŸ“Š",title:"Comprehensive Management",description:"Course creation, student enrollment, quiz building, and content management",delay:"800ms"},{icon:"ðŸŽ¯",title:"Personalized Experience",description:"Adaptive learning, custom study plans, expense tracking, and mental health support",delay:"1000ms"}].map((t,s)=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500/10 to-black/50 backdrop-blur-lg rounded-3xl p-8 border border-orange-500/20 hover:border-orange-400/60 transition-all duration-700 transform hover:scale-105 hover:-translate-y-4 hover:rotate-1 hover-lift",style:{animationDelay:t.delay},"data-animate":!0,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-orange-500/5 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-6xl mb-6 group-hover:animate-spin filter drop-shadow-lg",children:t.icon}),e.jsx("h3",{className:"text-2xl font-bold mb-4 text-white group-hover:text-orange-300 transition-all duration-300",children:t.title}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:t.description})]}),e.jsx("div",{className:"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer bg-gradient-to-r from-transparent via-orange-400/20 to-transparent"})]},s))})]})}),e.jsx("section",{className:"relative z-10 py-20 px-4 bg-gradient-to-r from-orange-900/10 to-black/50",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsx("h2",{className:"text-4xl sm:text-6xl font-bold mb-12 bg-gradient-to-r from-white via-orange-400 to-orange-600 bg-clip-text text-transparent neon-glow",children:"Advanced AI Capabilities"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-16",children:["Multimodal AI (Text, Voice, Image)","PDF Document Analysis & Chat","Smart Study Scheduling","Expense Tracking & Budgeting","Grade Prediction & Analytics","Research Assistant","Note Enhancement","Study Group Matching","Adaptive Quiz Generation","Essay Feedback & Grading","Content Summarization","Time Management Coaching","Mental Health Support"].map((t,s)=>e.jsx("div",{className:"group bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-orange-500/20 hover:border-orange-400/60 transition-all duration-500 transform hover:scale-105 hover:-translate-y-1",style:{animationDelay:100*s+"ms"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-400 to-orange-600 rounded-full group-hover:animate-pulse animate-scale-pulse"}),e.jsx("span",{className:"text-gray-300 group-hover:text-white transition-colors duration-300",children:t})]})},s))})]})}),e.jsx("section",{className:"relative z-10 py-20 px-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500/10 to-black/50 backdrop-blur-lg rounded-3xl p-12 border border-orange-500/30 hover:border-orange-400/70 transition-all duration-700 transform hover:scale-105 hover-lift",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-orange-600/20 rounded-full blur-2xl group-hover:animate-pulse"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"text-6xl mr-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸŽ“"}),e.jsx("h3",{className:"text-3xl font-bold text-orange-300 group-hover:text-white transition-colors duration-300",children:"For Students"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"AI Study Companion"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Voice, text, and image-powered learning assistant"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Smart Study Tools"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Flashcards, notes enhancement, PDF analysis"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Progress Tracking"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Grade prediction and learning analytics"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Personalized Learning"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Adaptive schedules and study recommendations"})]})]})]})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-white/5 to-black/50 backdrop-blur-lg rounded-3xl p-12 border border-white/20 hover:border-orange-400/70 transition-all duration-700 transform hover:scale-105 hover-lift",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-orange-400/20 rounded-full blur-2xl group-hover:animate-pulse"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"text-6xl mr-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸ‘¨â€ðŸ’¼"}),e.jsx("h3",{className:"text-3xl font-bold text-white group-hover:text-orange-300 transition-colors duration-300",children:"For Admins"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Course Management"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Create and organize courses with ease"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Content Creation"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Upload videos, PDFs, and interactive content"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Assessment Tools"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Build quizzes and track student performance"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 group/item",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full mt-2 group-hover/item:animate-ping"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Comprehensive insights and reporting"})]})]})]})]})]})]})})}),e.jsx("section",{className:"relative z-10 py-20 px-4 bg-gradient-to-r from-orange-900/10 to-black/50",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsx("h2",{className:"text-4xl sm:text-6xl font-bold mb-12 bg-gradient-to-r from-orange-400 via-white to-orange-500 bg-clip-text text-transparent neon-glow",children:"Why Choose UniConnect?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:[e.jsxs("div",{className:"group text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸš€"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-orange-300 group-hover:text-white transition-colors duration-300",children:"Cutting-Edge"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Latest AI and ML technologies"})]}),e.jsxs("div",{className:"group text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸ”’"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white group-hover:text-orange-300 transition-colors duration-300",children:"Secure"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Enterprise-grade security"})]}),e.jsxs("div",{className:"group text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"ðŸ“±"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-orange-400 group-hover:text-white transition-colors duration-300",children:"Responsive"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Works on any device"})]}),e.jsxs("div",{className:"group text-center transform hover:scale-110 transition-transform duration-300",children:[e.jsx("div",{className:"text-6xl mb-4 group-hover:animate-bounce filter drop-shadow-lg",children:"âš¡"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white group-hover:text-orange-300 transition-colors duration-300",children:"Fast"}),e.jsx("p",{className:"text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:"Lightning-fast performance"})]})]})]})}),e.jsx("section",{className:"relative z-10 py-20 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h2",{className:"text-4xl sm:text-6xl font-bold mb-8 bg-gradient-to-r from-orange-400 via-white to-orange-500 bg-clip-text text-transparent neon-glow animate-shimmer",children:"Ready to Transform Your Learning?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-12 max-w-2xl mx-auto",children:"Join thousands of students and educators already experiencing the future of education"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[e.jsxs(l,{to:"/login",className:"group relative bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-4 px-12 rounded-2xl shadow-2xl transition-all duration-300 transform hover:scale-110 hover:shadow-orange-500/50 text-xl overflow-hidden animate-glow",children:[e.jsx("span",{className:"relative z-10",children:"Start Learning Now"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-orange-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 animate-shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),e.jsxs("div",{className:"text-gray-400",children:[e.jsxs("p",{className:"text-sm flex items-center",children:[e.jsx("span",{className:"text-orange-400 mr-2",children:"âœ¨"})," No credit card required"]}),e.jsxs("p",{className:"text-sm flex items-center",children:[e.jsx("span",{className:"text-orange-400 mr-2",children:"ðŸš€"})," Get started in seconds"]})]})]})]})}),e.jsx("footer",{className:"relative z-10 py-8 text-center text-gray-500 text-sm border-t border-orange-500/20 backdrop-blur-sm bg-black/20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("p",{children:["Â© ",(new Date).getFullYear()," UniConnect Learning Hub. All rights reserved."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"text-orange-400",children:"Powered by Advanced AI"})," â€¢ ",e.jsx("span",{className:"text-white",children:"Built for the Future of Education"})]})]})})]})},E=[{name:"Wanjiku Mwangi",message:"Uniconnect has transformed my study habits. I love the interactive features!"},{name:"Brian Otieno",message:"The app makes learning so much easier and fun. Highly recommended!"},{name:"Aisha Njeri",message:"I found amazing study partners and improved my grades. Asante sana!"},{name:"Samuel Kiptoo",message:"The quizzes and notes are top-notch. Best app for Kenyan students."},{name:"Mercy Chebet",message:"I never thought online learning could be this engaging. Hongera Uniconnect!"}];function T(){const[a,r]=i.useState(0);return i.useEffect(()=>{const e=setTimeout(()=>{r(e=>(e+1)%E.length)},3500);return()=>clearTimeout(e)},[a]),e.jsx("div",{className:"w-full h-full flex flex-col justify-center items-center px-2 py-8",children:e.jsxs("div",{className:"w-full max-w-xs sm:max-w-sm bg-gray-900/80 rounded-2xl shadow-lg border border-gray-700 p-6",children:[e.jsx(t,{mode:"wait",children:e.jsxs(s.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.5},children:[e.jsxs("p",{className:"text-lg sm:text-xl font-semibold text-orange-300 mb-4",children:["â€œ",E[a].message,"â€"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-amber-500 flex items-center justify-center text-white font-bold text-lg",children:E[a].name.split(" ").map(e=>e[0]).join("")}),e.jsx("span",{className:"text-sm sm:text-base text-gray-200 font-medium",children:E[a].name})]})]},a)}),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:E.map((t,s)=>e.jsx("button",{className:"w-2.5 h-2.5 rounded-full "+(s===a?"bg-orange-400":"bg-gray-600"),onClick:()=>r(s),"aria-label":`Go to testimonial ${s+1}`},s))})]})})}const I="http://localhost:3004/api";function L(){const[t,a]=i.useState("login"),[r,n]=i.useState(""),[o,l]=i.useState(""),[m,h]=i.useState(""),[x,u]=i.useState("student"),[g,p]=i.useState(""),[f,b]=i.useState(""),[y,v]=i.useState(!1),[j,w]=i.useState(!1),N=c(),k=d(),S=i.useRef(null);i.useEffect(()=>{var e,t;null===S.current&&(S.current=(null==(t=null==(e=k.state)?void 0:e.from)?void 0:t.pathname)||null)},[]),i.useEffect(()=>{p(""),b("")},[t]),i.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("userRole");if(e){const e=S.current||("admin"===t?"/admin":"/student");N(e,{replace:!0})}},[N]);return e.jsxs("div",{className:"min-h-screen flex flex-col sm:flex-row items-center justify-center bg-gradient-to-br from-gray-900 to-black text-white p-2 sm:p-4",children:[e.jsx("div",{className:"w-full sm:w-1/2 flex items-center justify-center mb-8 sm:mb-0 sm:mr-8",children:e.jsx(T,{})}),e.jsx("div",{className:"w-full sm:w-1/2 flex items-center justify-center",children:e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-800 p-4 sm:p-8 rounded-2xl shadow-xl w-full max-w-xs sm:max-w-md border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(s.div,{initial:{scale:.8},animate:{scale:1},className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-r from-orange-500 to-amber-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-8 h-8 sm:w-10 sm:h-10 text-white",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),e.jsx(s.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent",children:"login"===t?"Welcome Back":"register"===t?"Create Account":"Reset Password"}),e.jsx("p",{className:"text-gray-400 mt-2 text-xs sm:text-base",children:"login"===t?"Sign in to continue your learning journey":"register"===t?"Join us to unlock new possibilities":"Enter your email to reset your password"})]}),e.jsxs("form",{onSubmit:async e=>{var s,a,n,i;e.preventDefault(),v(!0),p(""),b("");try{if("login"===t||"register"===t){const e="register"===t?"/auth/register":"/auth/login",l="register"===t?{email:r,password:o,role:x,fullName:m}:{email:r,password:o},c=await fetch(I+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),d=await c.json();if(!c.ok)throw new Error(d.message||(null==(s=d.error)?void 0:s.message)||"An error occurred");const h=(null==(a=d.session)?void 0:a.access_token)||d.access_token,u=(null==(n=d.session)?void 0:n.refresh_token)||d.refresh_token,g=(null==(i=d.profile)?void 0:i.role)||d.user&&d.user.role||d.user&&d.user.user_metadata&&d.user.user_metadata.role||"student";if(!h||!u)throw new Error("Authentication tokens missing");localStorage.setItem("token",h),localStorage.setItem("refreshToken",u),localStorage.setItem("userRole",g),localStorage.setItem("user",JSON.stringify({...d.user||{},role:g}));const p=S.current||("admin"===g?"/admin":"/student");N(p,{replace:!0})}else if("forgotPassword"===t){const e=await fetch(I+"/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to send reset email");b("Password reset email sent. Please check your inbox.")}}catch(l){p(l.message||"Authentication failed")}finally{v(!1)}},className:"space-y-4 sm:space-y-5",children:[e.jsx("input",{type:"hidden",name:"redirectTo",value:window.location.origin+"/confirm"}),"register"===t&&e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("label",{className:"block text-gray-300 mb-2 text-xs sm:text-sm",children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"John Doe",className:"w-full p-3 sm:p-4 rounded-xl bg-gray-700 text-white border border-gray-600 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50 transition text-xs sm:text-base",value:m,onChange:e=>h(e.target.value),required:!0})]}),("login"===t||"register"===t||"forgotPassword"===t)&&e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:"register"===t?.3:.2},children:[e.jsx("label",{className:"block text-gray-300 mb-2 text-xs sm:text-sm",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@example.com",className:"w-full p-3 sm:p-4 rounded-xl bg-gray-700 text-white border border-gray-600 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50 transition text-xs sm:text-base",value:r,onChange:e=>n(e.target.value),required:!0})]}),("login"===t||"register"===t)&&e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:"register"===t?.4:.3},className:"relative",children:[e.jsx("label",{className:"block text-gray-300 mb-2 text-xs sm:text-sm",children:"Password"}),e.jsx("input",{type:j?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full p-3 sm:p-4 rounded-xl bg-gray-700 text-white border border-gray-600 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50 transition pr-12 sm:pr-16 text-xs sm:text-base",value:o,onChange:e=>l(e.target.value),required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 bottom-3 sm:bottom-4 text-xs sm:text-sm text-orange-400 hover:text-orange-300 font-medium",onClick:()=>w(!j),"aria-label":j?"Hide password":"Show password",children:j?"Hide":"Show"})]}),"register"===t&&e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx("label",{className:"block text-gray-300 mb-2 text-xs sm:text-sm",children:"Account Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("button",{type:"button",className:"p-3 sm:p-4 rounded-xl border transition text-xs sm:text-base "+("student"===x?"bg-orange-500/20 border-orange-500 text-orange-400":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600"),onClick:()=>u("student"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 sm:mb-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),e.jsx("span",{children:"Student"})]}),e.jsxs("button",{type:"button",className:"p-3 sm:p-4 rounded-xl border transition text-xs sm:text-base "+("admin"===x?"bg-orange-500/20 border-orange-500 text-orange-400":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600"),onClick:()=>u("admin"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 mx-auto mb-1 sm:mb-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Admin"})]})]})]}),g&&e.jsx(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-3 sm:p-4 rounded-xl bg-red-900/30 border border-red-700 text-red-300 text-xs sm:text-base",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),g]})}),f&&e.jsx(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-3 sm:p-4 rounded-xl bg-green-900/30 border border-green-700 text-green-300 text-xs sm:text-base",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f]})}),e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 py-3 sm:py-4 rounded-xl font-semibold shadow-lg transition-all disabled:opacity-50 text-xs sm:text-base",disabled:y,children:y?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 sm:h-5 sm:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"forgotPassword"===t?"Sending...":"register"===t?"Creating Account...":"Signing In..."]}):"login"===t?"Sign In":"register"===t?"Create Account":"Send Reset Email"})]}),e.jsx("div",{className:"mt-6 text-center text-gray-400 text-xs sm:text-sm",children:"register"===t?e.jsxs("div",{children:["Already have an account?"," ",e.jsx("button",{className:"text-orange-400 hover:text-orange-300 font-medium transition-colors",onClick:()=>a("login"),disabled:y,children:"Sign In"})]}):"login"===t?e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3",children:[e.jsxs("div",{children:["Don't have an account?"," ",e.jsx("button",{className:"text-orange-400 hover:text-orange-300 font-medium transition-colors",onClick:()=>a("register"),disabled:y,children:"Register"})]}),e.jsx("button",{className:"text-orange-400 hover:text-orange-300 font-medium transition-colors",onClick:()=>a("forgotPassword"),disabled:y,children:"Forgot your password?"})]}):"forgotPassword"===t?e.jsxs("div",{children:["Remember your password?"," ",e.jsx("button",{className:"text-orange-400 hover:text-orange-300 font-medium transition-colors",onClick:()=>a("login"),disabled:y,children:"Sign In"})]}):null})]})})]})}const z="http://localhost:3004/api/api",D=({message:t,type:a,onClose:r})=>{const n={success:"bg-green-500",error:"bg-red-500",info:"bg-orange-500"}[a];return e.jsxs(s.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:`fixed bottom-6 right-6 ${n} text-white px-6 py-4 rounded-xl shadow-xl flex items-center space-x-4 z-50`,children:[e.jsx("span",{className:"font-medium",children:t}),e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-xl",children:"Ã—"})]})};function O(){const[a,r]=i.useState([]),[n,o]=i.useState(""),[l,d]=i.useState([]),[m,h]=i.useState(!1),[x,u]=i.useState("create"),[g,p]=i.useState({title:"",description:""}),[f,b]=i.useState(null),[y,v]=i.useState(!1),[j,w]=i.useState(null),[N,k]=i.useState(""),S=c(),C=localStorage.getItem("token");i.useEffect(()=>{if(C)try{JSON.parse(atob(C.split(".")[1]))}catch(e){}},[C]),i.useEffect(()=>{if(!C)return w({message:"Please log in to access this page",type:"error"}),void S("/login")},[C,S]);const _=async()=>{if(C){v(!0),k("");try{const e=await fetch(z+"/courses",{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(401===e.status)return w({message:"Session expired. Please log in again.",type:"error"}),localStorage.removeItem("token"),void S("/login");if(403===e.status)return void w({message:"You don't have permission to view courses.",type:"error"});if(!e.ok){const t=await e.json().catch(()=>({message:"Network error"}));throw new Error(t.message||`Error: ${e.status}`)}const t=await e.json();r(t),d(t)}catch(e){k(e.message),w({message:e.message,type:"error"})}finally{v(!1)}}};i.useEffect(()=>{_()},[]),i.useEffect(()=>{d(a.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase())))},[n,a]);const A=(e,t)=>{u(e),h(!0),"edit"===e&&t?(p({title:t.title,description:t.description}),b(t.id||null)):(p({title:"",description:""}),b(null))},E=()=>{h(!1),p({title:"",description:""}),b(null)};return C?e.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs(s.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.4},className:"bg-white shadow-lg flex items-center justify-between px-8 py-6",children:[e.jsx(s.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-amber-500 bg-clip-text text-transparent",children:"Manage Courses"}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.98},className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white px-6 py-3 rounded-xl font-semibold shadow-lg flex items-center space-x-2",onClick:()=>A("create"),children:e.jsx("span",{children:"+ New Course"})})]}),e.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-8 py-6 bg-gradient-to-r from-white to-gray-50 flex items-center",children:e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx("input",{type:"text",placeholder:"Search courses...",className:"w-full p-4 pl-12 rounded-2xl bg-white border border-gray-200 text-black shadow-lg focus:ring-2 focus:ring-orange-300 focus:border-transparent",value:n,onChange:e=>o(e.target.value)}),e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsx("main",{className:"flex-1 px-8 py-6",children:y?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(s.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-t-4 border-orange-500 border-solid rounded-full"})}):0===l.length?e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full text-center py-20",children:[e.jsx("div",{className:"text-gray-500 text-xl mb-4",children:"No courses found"}),e.jsx("button",{onClick:()=>A("create"),className:"text-orange-500 hover:text-orange-600 font-medium",children:"Create your first course"})]}):e.jsx(s.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},children:l.map((t,a)=>e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},whileHover:{y:-10,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 transform transition-all duration-300",children:e.jsxs("div",{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(s.h2,{whileHover:{color:"#f97316"},className:"text-xl font-bold text-gray-800 mb-2",children:t.title}),e.jsxs("div",{className:"bg-orange-100 text-orange-800 text-xs font-bold px-2 py-1 rounded-full",children:["ID: ",t.id?t.id.substring(0,8):"N/A"]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:t.description})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2.5 rounded-xl font-semibold transition-colors",onClick:()=>A("edit",t),disabled:!t.id,children:"Edit"}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2.5 rounded-xl font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>t.id&&(async e=>{if(e&&"undefined"!==e)if(C){if(window.confirm("Delete this course?")){v(!0),k("");try{const t=await fetch(z+`/courses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(t.ok)return w({message:"Course deleted!",type:"success"}),void _();if(401===t.status||403===t.status)return w({message:"Session expired. Please log in again.",type:"error"}),localStorage.removeItem("token"),void S("/login");const s=await t.json().catch(()=>({message:"Network error"}));throw new Error(s.message||`Error: ${t.status}`)}catch(t){k(t.message),w({message:t.message,type:"error"})}finally{v(!1)}}}else w({message:"Please log in to perform this action",type:"error"});else w({message:"Invalid course ID",type:"error"})})(t.id),disabled:!t.id,children:"Delete"})]})]})},t.id||a))})})]}),e.jsx(t,{children:m&&e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-60",children:e.jsxs(s.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative mx-4",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-black text-2xl",onClick:E,"aria-label":"Close",children:"Ã—"}),e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:["edit"===x?"Edit Course":"Create Course",e.jsx("div",{className:"mt-2 w-16 h-1 bg-gradient-to-r from-orange-400 to-amber-400 rounded-full"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),C){v(!0),k("");try{const e="edit"===x?"PUT":"POST",t="edit"===x?`/courses/${f}`:"/courses",s=await fetch(z+t,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify(g)});if(s.ok)return w({message:"edit"===x?"Course updated!":"Course created!",type:"success"}),E(),void _();if(401===s.status){await s.json().catch(()=>({message:"Unauthorized"}));return w({message:"Session expired. Please log in again.",type:"error"}),localStorage.removeItem("token"),void S("/login")}if(403===s.status){await s.json().catch(()=>({message:"Forbidden"}));return void w({message:"You don't have permission to perform this action.",type:"error"})}const a=await s.json().catch(()=>({message:"Network error"}));throw new Error(a.message||`Error: ${s.status}`)}catch(t){k(t.message),w({message:t.message,type:"error"})}finally{v(!1)}}else w({message:"Please log in to perform this action",type:"error"})},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Course Title"}),e.jsx("input",{type:"text",placeholder:"Enter course title",className:"w-full p-4 rounded-xl bg-gray-50 border border-gray-200 text-black focus:ring-2 focus:ring-orange-300 focus:border-transparent",value:g.title,onChange:e=>p(t=>({...t,title:e.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Description"}),e.jsx("textarea",{placeholder:"Enter course description",className:"w-full p-4 rounded-xl bg-gray-50 border border-gray-200 text-black focus:ring-2 focus:ring-orange-300 focus:border-transparent min-h-[120px]",value:g.description,onChange:e=>p(t=>({...t,description:e.target.value})),required:!0})]}),e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 py-4 px-6 rounded-xl font-semibold text-white w-full shadow-lg",disabled:y,children:y?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-white border-t-transparent animate-spin mr-2"}),"Processing..."]}):"edit"===x?"Update Course":"Create Course"})]})]})})}),e.jsx(t,{children:j&&e.jsx(D,{message:j.message,type:j.type,onClose:()=>w(null)})})]}):null}const $=["#ff6600","#007bff","#00c49f","#ffbb28"];function P(){const[t,s]=i.useState(null),[a,r]=i.useState(!1),[n,o]=i.useState("");i.useEffect(()=>{if("admin"!==localStorage.getItem("userRole"))return o("Access denied. Admin privileges required."),void r(!1);const e=localStorage.getItem("token");r(!0),o(""),fetch("http://localhost:3004/api/analytics/dashboard",{headers:{Authorization:`Bearer ${e}`}}).then(async e=>{if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.message||`HTTP error! status: ${e.status}`)}return e.json()}).then(e=>s(e)).catch(e=>{o(e.message)}).finally(()=>r(!1))},[]);const l=t&&t.totalUsers?[{name:"Students",value:t.totalStudents},{name:"Admins",value:t.totalAdmins}]:[];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow flex items-center px-8 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Analytics Dashboard"})}),e.jsx("main",{className:"flex-1 px-8 py-8",children:a?e.jsx("div",{className:"text-white text-lg",children:"Loading..."}):n?e.jsx("div",{className:"text-red-400",children:n}):t?e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-500",children:t.totalUsers}),e.jsx("div",{className:"text-gray-700 mt-2",children:"Total Users"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-500",children:t.totalStudents}),e.jsx("div",{className:"text-gray-700 mt-2",children:"Students"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-500",children:t.totalAdmins}),e.jsx("div",{className:"text-gray-700 mt-2",children:"Admins"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col items-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:t.totalCourses}),e.jsx("div",{className:"text-gray-700 mt-2",children:"Courses"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-xl mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"User Distribution"}),e.jsx(b,{width:"100%",height:250,children:e.jsxs(y,{children:[e.jsx(v,{data:l,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:l.map((t,s)=>e.jsx(j,{fill:$[s%$.length]},`cell-${s}`))}),e.jsx(w,{})]})})]})]}):e.jsx("div",{className:"text-gray-300",children:"No analytics data available."})})]})}function q(){const{id:t}=m(),[s,a]=i.useState(null),[r,n]=i.useState(!1),[o,l]=i.useState(""),d=c();return i.useEffect(()=>{const e=localStorage.getItem("token");n(!0),l(""),fetch("http://localhost:3004/api/courses",{headers:{Authorization:`Bearer ${e}`}}).then(async e=>{if(!e.ok)throw new Error((await e.json()).message||"Error");return e.json()}).then(e=>{const s=e.find(e=>e._id===t);a(s||null)}).catch(e=>l(e.message)).finally(()=>n(!1))},[t]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow flex items-center px-8 py-4",children:[e.jsx("button",{className:"text-orange-500 font-bold mr-4",onClick:()=>d(-1),children:"â† Back"}),e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Course Details"})]}),e.jsx("main",{className:"flex-1 px-8 py-8 flex flex-col items-center",children:r?e.jsx("div",{className:"text-white text-lg",children:"Loading..."}):o?e.jsx("div",{className:"text-red-400",children:o}):s?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-orange-500",children:s.title}),e.jsx("p",{className:"text-gray-700 mb-6",children:s.description})]}):e.jsx("div",{className:"text-gray-300",children:"Course not found."})})]})}const R="http://localhost:3004/api";function B(){var t;const[s,a]=i.useState([]),[r,n]=i.useState(!1),[o,l]=i.useState(""),[d,m]=i.useState([]),[h,x]=i.useState(!1),[u,g]=i.useState(""),p=c(),f=JSON.parse(localStorage.getItem("user")||"{}"),b=(null==(t=null==f?void 0:f.user_metadata)?void 0:t.full_name)||(null==f?void 0:f.fullName)||(null==f?void 0:f.email)||"Student";i.useEffect(()=>{const e=localStorage.getItem("token");n(!0),l(""),fetch(R+"/courses",{headers:{Authorization:`Bearer ${e}`}}).then(async e=>{if(!e.ok)throw new Error((await e.json()).message||"Error");return e.json()}).then(e=>a(e)).catch(e=>l(e.message)).finally(()=>n(!1))},[]),i.useEffect(()=>{(async()=>{x(!0),g("");try{const e=localStorage.getItem("token")||"",t=await fetch(`${R}/ai/learning-path`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({performanceData:{quizResults:[],notes:[],completedLessons:[]}})});if(!t.ok)throw new Error("Failed to fetch learning path");const s=await t.json();m(s.learningPath||[])}catch(e){g(e.message||"Failed to load learning path")}finally{x(!1)}})()},[]);const y=[{label:"Total Courses",value:s.length,icon:"bx bx-book",color:"text-orange-500"},{label:"Completed",value:"N/A",icon:"bx bx-check-circle",color:"text-green-500"},{label:"In Progress",value:"N/A",icon:"bx bx-time",color:"text-blue-500"},{label:"Certificates",value:"Coming Soon",icon:"bx bx-award",color:"text-purple-500"}];return e.jsxs("div",{className:"min-h-screen h-screen w-full max-w-full bg-gradient-to-br from-black via-gray-900 to-gray-800 px-2 py-2 sm:px-4 sm:py-6 overflow-x-hidden",children:[e.jsxs("div",{className:"mb-6 animate-fade-in-up w-full",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-2",children:["Welcome back, ",e.jsx("span",{className:"text-orange-500",children:b.split(" ")[0]}),"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-400 text-base sm:text-lg",children:"Ready to continue your learning journey?"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-2 sm:p-6 mb-6 border border-orange-500 animate-fade-in-up animation-delay-200 w-full max-w-full",children:[e.jsxs("h2",{className:"text-xl font-bold text-orange-400 mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-map text-orange-400 mr-2"}),"Your AI Learning Path"]}),h?e.jsx("div",{className:"text-gray-400",children:"Loading learning path..."}):u?e.jsx("div",{className:"bg-red-900 text-red-300 p-2 rounded",children:u}):0===d.length?e.jsx("div",{className:"text-gray-400",children:"No personalized path available yet."}):e.jsx("ol",{className:"list-decimal ml-4 sm:ml-6 space-y-2 sm:space-y-3",children:d.map((t,s)=>e.jsxs("li",{className:"bg-gray-900 rounded-lg p-2 sm:p-4 border border-gray-700",children:[e.jsx("div",{className:"font-bold text-white",children:t.title}),e.jsx("div",{className:"text-gray-400 text-sm",children:t.description})]},t.id||s))})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4 mb-6 w-full max-w-full",children:y.map((t,s)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700 hover:border-orange-500 transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:100*s+"ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:`${t.icon} text-2xl ${t.color}`}),e.jsx("span",{className:"text-2xl font-bold text-white",children:t.value})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.label})]},t.label))}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-2 sm:p-6 mb-6 border border-gray-700 animate-fade-in-up animation-delay-300 w-full max-w-full",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-trending-up text-orange-500 mr-2"}),"Learning Progress"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Progress"}),e.jsx("span",{className:"text-orange-500 font-semibold",children:"N/A"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-400 h-2 rounded-full animate-pulse",style:{width:"0%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:"N/A"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Hours This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:"N/A"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Streak Days"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-500",children:"Coming Soon"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"XP Points"})]})]})]})]}),e.jsxs("div",{className:"animate-fade-in-up animation-delay-600 w-full max-w-full",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx("i",{className:"bx bx-library text-orange-500 mr-2"}),"Available Courses"]}),r?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"}),e.jsx("span",{className:"text-white text-lg ml-4",children:"Loading courses..."})]}):o?e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-4",children:[e.jsx("i",{className:"bx bx-error-circle mr-2"}),o]}):0===s.length?e.jsxs("div",{className:"bg-blue-900 border border-blue-700 text-blue-300 px-4 py-3 rounded-lg mb-4",children:[e.jsx("i",{className:"bx bx-info-circle mr-2"}),"No courses available at the moment."]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-2 sm:gap-6 w-full",children:s.map((t,s)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 sm:p-6 border border-gray-700 hover:border-orange-500 transition-all duration-300 transform hover:scale-105 hover:shadow-2xl group animate-fade-in-up",style:{animationDelay:100*(s+3)+"ms"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-orange-500 bg-opacity-20 p-3 rounded-lg",children:e.jsx("i",{className:"bx bx-book-open text-2xl text-orange-500"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Progress"}),e.jsxs("div",{className:"text-sm font-semibold text-orange-500",children:[Math.floor(100*Math.random()),"%"]})]})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-orange-500 transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("i",{className:"bx bx-time mr-1"}),e.jsxs("span",{children:[Math.floor(10*Math.random())+1,"h ",Math.floor(60*Math.random()),"m"]})]}),e.jsxs("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-300 transform hover:scale-105 flex items-center",onClick:()=>p(`/student/courses/${t._id}`),children:[e.jsx("span",{children:"Continue"}),e.jsx("i",{className:"bx bx-right-arrow-alt ml-1"})]})]})]},t._id))})]}),e.jsxs("div",{className:"mt-6 animate-fade-in-up animation-delay-900 w-full max-w-full",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-zap text-orange-500 mr-2"}),"Quick Actions"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4 w-full max-w-full",children:[{label:"Study Buddy",icon:"bx bx-message-dots",path:"/student/chatbot"},{label:"Flashcards",icon:"bx bx-collection",path:"/student/flashcards"},{label:"My Notes",icon:"bx bx-notepad",path:"/student/mynotes"},{label:"Smart Quiz",icon:"bx bx-brain",path:"/student/smartquiz"},{label:"Find Study Partner",icon:"bx bx-user-plus",path:"/student/find-partner"}].map((t,s)=>e.jsxs("button",{onClick:()=>p(t.path),className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-orange-500 rounded-xl p-4 text-center transition-all duration-300 transform hover:scale-105 group",children:[e.jsx("i",{className:`${t.icon} text-2xl text-orange-500 mb-2 block group-hover:animate-bounce`}),e.jsx("span",{className:"text-white text-sm font-medium",children:t.label})]},t.label))})]})]})}const M="http://localhost:3004/api/api",U=()=>{var t;const[s,n]=i.useState([]),[o,l]=i.useState(!1),[d,m]=i.useState(null),[h,x]=i.useState(!0),[u,g]=i.useState("");c();const[p,f]=i.useState({section_id:"",title:"",content:"",order:"",video_url:""}),b=async()=>{try{x(!0);const e=await fetch(`${M}/lessons`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t=e.headers.get("content-type");if(!t||!t.includes("application/json")){const t=await e.text();throw new Error(`Invalid response: ${t.substring(0,100)}`)}if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch lessons")}const s=await e.json();n(s),g("")}catch(e){g(e.message),r.error(`Error: ${e.message}`)}finally{x(!1)}};i.useEffect(()=>{b()},[]);const y=e=>{const{name:t,value:s}=e.target;f(e=>({...e,[t]:"order"===t?""===s?"":Number(s):s}))},v=async e=>{e.preventDefault();try{const e=d?`${M}/lessons/${d.id}`:`${M}/lessons`,t=d?"PUT":"POST",s=await fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...p,order:Number(p.order)})}),a=s.headers.get("content-type");if(!a||!a.includes("application/json")){const e=await s.text();throw new Error(`Invalid response: ${e.substring(0,100)}`)}if(!s.ok){const e=await s.json();throw new Error(e.message||"Operation failed")}await s.json();r.success(d?"Lesson updated!":"Lesson created!"),f({section_id:"",title:"",content:"",order:"",video_url:""}),l(!1),m(null),b()}catch(t){r.error(`Error: ${t.message}`)}},j=()=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-2xl p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-400",children:d?"Edit Lesson":"Create New Lesson"}),e.jsx("button",{onClick:()=>{l(!1),m(null)},className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"bx bx-x text-3xl"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Section ID"}),e.jsx("input",{type:"text",name:"section_id",value:p.section_id,onChange:y,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-orange-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Order"}),e.jsx("input",{type:"number",name:"order",value:p.order,onChange:y,min:"0",className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-orange-500 focus:outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:p.title,onChange:y,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-orange-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Content"}),e.jsx("textarea",{name:"content",value:p.content,onChange:y,rows:4,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-orange-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Video URL (Optional)"}),e.jsx("input",{type:"url",name:"video_url",value:p.video_url,onChange:y,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-orange-500 focus:outline-none",placeholder:"https://example.com/video.mp4"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-6 py-2 border border-gray-600 rounded-lg text-gray-300 hover:bg-gray-700 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 rounded-lg font-semibold text-white transition",children:d?"Update Lesson":"Create Lesson"})]})]})]})}),w=(()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):{}}catch{return{}}})(),N=(null==(t=null==w?void 0:w.user_metadata)?void 0:t.full_name)||"Admin";return e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow flex items-center px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(N)}&background=ff6600&color=fff`,alt:"Admin Avatar",className:"w-12 h-12 rounded-full border-2 border-orange-400"}),e.jsx("div",{children:e.jsx("div",{className:"text-lg font-bold text-black",children:"Manage Lessons"})})]})}),e.jsx("main",{className:"flex-1 px-8 py-6 bg-gradient-to-b from-gray-50 to-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"All Lessons"}),e.jsxs("button",{onClick:()=>{m(null),f({section_id:"",title:"",content:"",order:"",video_url:""}),l(!0)},className:"flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded-lg transition",children:[e.jsx("i",{className:"bx bx-plus text-xl"}),"Create Lesson"]})]}),u&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",children:e.jsx("p",{children:u})}),h?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:t.section_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.order}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>(e=>{m(e),f({section_id:e.section_id,title:e.title,content:e.content,order:e.order,video_url:e.video_url||""}),l(!0)})(t),className:"text-indigo-600 hover:text-indigo-900 mr-4","aria-label":"Edit lesson",children:e.jsx("i",{className:"bx bx-edit text-xl"})}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this lesson?"))try{const t=await fetch(`${M}/lessons/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(204===t.status)return r.success("Lesson deleted successfully!"),void b();if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to delete lesson")}}catch(t){r.error(`Error: ${t.message}`)}})(t.id),className:"text-red-600 hover:text-red-900","aria-label":"Delete lesson",children:e.jsx("i",{className:"bx bx-trash text-xl"})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No lessons found. Create your first lesson!"})})})]})})})]})}),o&&e.jsx(j,{}),e.jsx(a,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},F=[{label:"Dashboard",path:"",icon:"bx bx-home"},{label:"Analytics",path:"analytics",icon:"bx bx-line-chart"},{label:"Manage Courses",path:"courses",icon:"bx bx-book"},{label:"Manage Quizzes",path:"quizzes",icon:"bx bx-edit"},{label:"Manage Lessons",path:"lessons",icon:"bx bx-video"}];function H(){var t,s;const a=c();d();const[r,n]=i.useState(!1),[o,l]=i.useState(null);i.useEffect(()=>{const e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]);const m=(null==(t=null==o?void 0:o.user_metadata)?void 0:t.full_name)||(null==o?void 0:o.fullName)||(null==o?void 0:o.email)||"Admin",u=(null==(s=null==o?void 0:o.user_metadata)?void 0:s.role)||(null==o?void 0:o.role)||"admin";return e.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-black via-gray-900 to-gray-800",children:[e.jsx("button",{className:"lg:hidden fixed top-4 left-4 z-50 bg-gray-900 hover:bg-gray-800 text-orange-400 p-3 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-110",onClick:()=>n(!r),"aria-label":"Toggle sidebar",children:e.jsx("i",{className:`bx ${r?"bx-x":"bx-menu"} text-xl transition-transform duration-300`})}),e.jsxs("aside",{className:`bg-gradient-to-b from-gray-900 via-gray-900 to-black text-white fixed top-0 left-0 h-full w-72 z-40 flex flex-col shadow-2xl transform transition-all duration-300 ease-in-out\n          ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:relative lg:h-screen border-r border-gray-800`,children:[e.jsx("div",{className:"p-6 border-b border-gray-800 bg-gradient-to-r from-orange-500 to-orange-600",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx("i",{className:"bx bx-shield-check text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"UniConnect"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Admin Portal"})]})]})}),e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors duration-300",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(m)}&background=ff6600&color=fff&size=40`,alt:"Avatar",className:"w-10 h-10 rounded-full border-2 border-orange-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm truncate",children:m}),e.jsx("p",{className:"text-gray-400 text-xs capitalize",children:u})]}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-xs uppercase text-gray-400 mb-3 pl-1 tracking-wider font-semibold flex items-center",children:[e.jsx("i",{className:"bx bx-cog mr-1 text-orange-500"}),"Admin Controls"]}),e.jsx("ul",{className:"space-y-2",children:F.map((t,s)=>e.jsx("li",{className:"animate-fade-in-up",style:{animationDelay:50*s+"ms"},children:e.jsx(h,{to:t.path,end:""===t.path,className:({isActive:e})=>"flex items-center w-full px-4 py-3 rounded-xl transition-all duration-300 text-left group relative overflow-hidden "+(e?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg transform scale-105":"hover:bg-gray-800 text-gray-300 hover:text-white hover:transform hover:scale-105"),onClick:()=>n(!1),children:({isActive:s})=>e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`${t.icon} text-xl mr-3 transition-transform duration-300 group-hover:scale-110`}),e.jsx("span",{className:"font-medium",children:t.label}),s&&e.jsx("div",{className:"absolute right-2",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})})},t.path))})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-800 bg-gradient-to-r from-gray-900 to-black",children:[e.jsxs("button",{className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 flex items-center justify-center group shadow-lg mb-4",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),a("/login",{replace:!0})},children:[e.jsx("i",{className:"bx bx-log-out mr-2 text-lg group-hover:animate-bounce"}),"Logout"]}),e.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Â© ",(new Date).getFullYear()," UniConnect"]})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden backdrop-blur-sm transition-opacity duration-300",onClick:()=>n(!1),"aria-label":"Close sidebar overlay"}),e.jsx("div",{className:"flex-1 flex flex-col lg:ml-0",children:e.jsx("main",{className:"flex-1 px-8 py-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 lg:ml-0",children:e.jsx(x,{})})})]})}function V(){var t,s;const a=c(),r=JSON.parse(localStorage.getItem("user")||"{}"),n=(null==(t=null==r?void 0:r.user_metadata)?void 0:t.full_name)||(null==r?void 0:r.fullName)||(null==r?void 0:r.email)||"Admin",i=(null==(s=null==r?void 0:r.user_metadata)?void 0:s.role)||(null==r?void 0:r.role)||"admin";return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-black via-gray-900 to-gray-800 px-4 py-6",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:["Welcome back, ",e.jsx("span",{className:"text-orange-500",children:n.split(" ")[0]}),"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Ready to manage your learning platform?"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-8 border border-gray-700 animate-fade-in-up",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-user-circle text-orange-500 mr-2"}),"Admin Profile"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=ff6600&color=fff&size=80`,alt:"Admin Avatar",className:"w-16 h-16 rounded-full border-4 border-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:n}),e.jsx("div",{className:"text-orange-500 text-sm font-semibold capitalize mb-1",children:i}),e.jsxs("div",{className:"text-gray-400 text-xs",children:["User ID: ",e.jsx("span",{className:"font-mono text-gray-300",children:r.id||"N/A"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[{label:"Total Courses",value:24,icon:"bx bx-book",color:"text-orange-500"},{label:"Total Quizzes",value:86,icon:"bx bx-question-mark",color:"text-green-500"},{label:"Total Lessons",value:142,icon:"bx bx-play-circle",color:"text-blue-500"},{label:"Total Students",value:1284,icon:"bx bx-user",color:"text-purple-500"}].map((t,s)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700 hover:border-orange-500 transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:100*s+"ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:`${t.icon} text-2xl ${t.color}`}),e.jsx("span",{className:"text-2xl font-bold text-white",children:t.value.toLocaleString()})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:t.label})]},t.label))}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-8 border border-gray-700 animate-fade-in-up animation-delay-300",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-trending-up text-orange-500 mr-2"}),"Platform Overview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Platform Growth"}),e.jsx("span",{className:"text-orange-500 font-semibold",children:"+24%"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-400 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:"89"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Active Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:"15"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"New This Week"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-500",children:"95%"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Completion Rate"})]})]})]})]}),e.jsxs("div",{className:"animate-fade-in-up animation-delay-600",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:[e.jsx("i",{className:"bx bx-cog text-orange-500 mr-2"}),"Management Tools"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6",children:[{title:"Course Management",description:"Create, edit, and organize courses for students",icon:"bx bx-book-open",path:"courses",color:"text-orange-500"},{title:"Quiz Management",description:"Design and manage quizzes for course assessments",icon:"bx bx-help-circle",path:"quizzes",color:"text-green-500"},{title:"Lesson Management",description:"Structure and organize lesson content and materials",icon:"bx bx-video",path:"lessons",color:"text-blue-500"}].map((t,s)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-orange-500 transition-all duration-300 transform hover:scale-105 hover:shadow-2xl group animate-fade-in-up",style:{animationDelay:100*(s+3)+"ms"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-orange-500 bg-opacity-20 p-3 rounded-lg",children:e.jsx("i",{className:`${t.icon} text-2xl ${t.color}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Status"}),e.jsx("div",{className:"text-sm font-semibold text-green-500",children:"Active"})]})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-orange-500 transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("i",{className:"bx bx-shield-check mr-1"}),e.jsx("span",{children:"Admin Access"})]}),e.jsxs("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-300 transform hover:scale-105 flex items-center",onClick:()=>a(t.path),children:[e.jsx("span",{children:"Manage"}),e.jsx("i",{className:"bx bx-right-arrow-alt ml-1"})]})]})]},t.title))})]}),e.jsxs("div",{className:"mt-8 animate-fade-in-up animation-delay-900",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-zap text-orange-500 mr-2"}),"Quick Actions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Analytics",icon:"bx bx-bar-chart-alt-2",path:"/admin/analytics"},{label:"Reports",icon:"bx bx-file-blank",path:"/admin/reports"},{label:"Settings",icon:"bx bx-cog",path:"/admin/settings"},{label:"Support",icon:"bx bx-support",path:"/admin/support"}].map((t,s)=>e.jsxs("button",{onClick:()=>a(t.path),className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-orange-500 rounded-xl p-4 text-center transition-all duration-300 transform hover:scale-105 group",children:[e.jsx("i",{className:`${t.icon} text-2xl text-orange-500 mb-2 block group-hover:animate-bounce`}),e.jsx("span",{className:"text-white text-sm font-medium",children:t.label})]},t.label))})]})]})}const W="http://localhost:3004/api",J=()=>{const t=c(),[a,r]=i.useState([]),[n,o]=i.useState(!0),[l,d]=i.useState(""),[m,h]=i.useState(!1),[x,u]=i.useState(null),[g,p]=i.useState(null),[f,b]=i.useState(null),[y,v]=i.useState(""),[j,w]=i.useState(""),[N,k]=i.useState([{question:"",options:["","","",""],answer:""}]);i.useEffect(()=>{var e,s;const a=localStorage.getItem("token"),r=localStorage.getItem("user");if(a&&r){try{const t=JSON.parse(r);b({id:t.id,email:t.email,role:(null==(e=t.user_metadata)?void 0:e.role)||t.role||"student",fullName:(null==(s=t.user_metadata)?void 0:s.fullName)||t.fullName||"User"})}catch(n){t("/login")}S()}else t("/login")},[]);const S=async()=>{try{o(!0),d("");const e=localStorage.getItem("token");if(!e)return void t("/login");const s=await fetch(`${W}/quizzes`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!s.ok){if(401===s.status)return void t("/login");throw new Error("Failed to fetch quizzes")}const a=await s.json();r(a)}catch(e){d(e.message||"Error loading quizzes")}finally{o(!1)}},C=()=>{v(""),w(""),k([{question:"",options:["","","",""],answer:""}])},_=(e,t,s)=>{const a=[...N];"question"===t?a[e].question=s:"answer"===t&&(a[e].answer=s),k(a)},A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},T="admin"===(null==f?void 0:f.role);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100",children:[e.jsx("nav",{className:"bg-indigo-800 text-white shadow-lg",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 flex justify-center items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h1",{className:"text-3xl font-extrabold",children:"Quizz Master"})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-indigo-800",children:"Quizzes Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create, edit, and manage quizzes for your lessons"})]}),l&&e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:l}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(s.div,{className:"bg-white rounded-xl shadow-lg p-6 lg:col-span-1",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"All Quizzes"}),T&&e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h(!0),u(null),p(null),C()},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"New Quiz"]})]}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}):0===a.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-4",children:"No quizzes found"})]}):e.jsx(s.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:a.map(n=>e.jsx(s.div,{variants:E,whileHover:{scale:1.02},className:"p-4 rounded-lg border cursor-pointer transition-all "+((null==g?void 0:g.id)===n.id?"bg-indigo-50 border-indigo-300 shadow-md":"bg-white border-gray-200 hover:border-indigo-200"),onClick:()=>(async e=>{try{o(!0),d("");const s=localStorage.getItem("token");if(!s)return void t("/login");const a=await fetch(`${W}/quizzes/${e}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(!a.ok){if(401===a.status)return void t("/login");throw new Error("Failed to fetch quiz details")}const r=await a.json();p(r)}catch(s){d(s.message||"Error loading quiz details")}finally{o(!1)}})(n.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:n.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Lesson: ",n.lesson_id]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[n.questions.length," ",1===n.questions.length?"question":"questions"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:A(n.updated_at)})]})]}),T&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{v(e.title),w(e.lesson_id),k(e.questions),u(e),h(!1),p(null)})(n)},className:"text-indigo-600 hover:text-indigo-800",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{try{d("");const s=localStorage.getItem("token");if(!s)return void t("/login");const n=await fetch(`${W}/quizzes/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});if(!n.ok){if(401===n.status)return void t("/login");throw new Error("Failed to delete quiz")}r(a.filter(t=>t.id!==e)),(null==g?void 0:g.id)===e&&p(null)}catch(s){d(s.message||"Error deleting quiz")}})(n.id)},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})},n.id))})]}),e.jsx("div",{className:"lg:col-span-2",children:m||x?e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:x?"Edit Quiz":"Create New Quiz"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quiz Title"}),e.jsx("input",{type:"text",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter quiz title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson ID"}),e.jsx("input",{type:"text",value:j,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter lesson ID"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Questions"}),e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k([...N,{question:"",options:["","","",""],answer:""}])},className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Question"]})]}),e.jsx("div",{className:"space-y-4",children:N.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h3",{className:"font-medium text-gray-700",children:["Question ",a+1]}),N.length>1&&e.jsx("button",{onClick:()=>(e=>{if(N.length<=1)return;const t=[...N];t.splice(e,1),k(t)})(a),className:"text-red-500 hover:text-red-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Question Text"}),e.jsx("textarea",{value:t.question,onChange:e=>_(a,"question",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your question",rows:2})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Options"}),e.jsx("div",{className:"space-y-2",children:t.options.map((s,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`answer-${a}`,checked:t.answer===s,onChange:()=>_(a,"answer",s),className:"mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("input",{type:"text",value:s,onChange:e=>((e,t,s)=>{const a=[...N];a[e].options[t]=s,k(a)})(a,r,e.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${r+1}`})]},r))})]})]},a))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x?async()=>{if(x)try{d("");const e=localStorage.getItem("token");if(!e)return void t("/login");const s={title:y,lesson_id:j,questions:N},n=await fetch(`${W}/quizzes/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!n.ok){if(401===n.status)return void t("/login");throw new Error("Failed to update quiz")}const i=await n.json();r(a.map(e=>e.id===i.id?i:e)),C(),u(null)}catch(e){d(e.message||"Error updating quiz")}}:async()=>{try{d("");const e=localStorage.getItem("token");if(!e)return void t("/login");const s={title:y,lesson_id:j,questions:N},n=await fetch(`${W}/quizzes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!n.ok){if(401===n.status)return void t("/login");throw new Error("Failed to create quiz")}const i=await n.json();r([...a,i]),C(),h(!1)}catch(e){d(e.message||"Error creating quiz")}},className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium",children:x?"Update Quiz":"Create Quiz"}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h(!1),u(null),C()},className:"border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})]}):g?e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:g.title}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Lesson ID: ",g.lesson_id]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Updated: ",A(g.updated_at)]})]}),e.jsx("div",{className:"space-y-6",children:g.questions.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-5 border border-gray-200 rounded-lg bg-white shadow-sm",children:[e.jsxs("h3",{className:"font-medium text-lg text-gray-800 mb-3",children:["Question ",a+1]}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.question}),e.jsx("div",{className:"space-y-3",children:t.options.map((s,a)=>e.jsx("div",{className:"p-3 rounded-lg border "+(s===t.answer?"border-green-500 bg-green-50":"border-gray-200"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-6 w-6 rounded-full flex items-center justify-center mr-3 "+(s===t.answer?"bg-green-500 text-white":"bg-gray-200"),children:String.fromCharCode(65+a)}),e.jsx("span",{children:s}),s===t.answer&&e.jsx("span",{className:"ml-auto text-green-600 font-medium",children:"Correct Answer"})]})},a))})]},a))})]}):e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-xl shadow-lg p-8 flex flex-col items-center justify-center text-center h-full",children:[e.jsx("div",{className:"bg-indigo-100 p-4 rounded-full mb-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Select a Quiz"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"Choose a quiz from the list to view its details, or create a new quiz to get started."}),T&&e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Create New Quiz"]})]})})]})]})]})},Q=[{label:"Dashboard",path:"dashboard",icon:"bx bx-home"},{label:"Courses",path:"courses",icon:"bx bx-book"},{label:"Notifications",path:"/student/notifications",icon:"bx bx-bell"}],G=[{label:"Study Buddy",path:"/student/chatbot",icon:"bx bx-message-dots"},{label:"Matching Game",path:"/student/matching-game",icon:"bx bx-game"},{label:"Flashcards",path:"/student/flashcards",icon:"bx bx-collection"},{label:"Task Scheduler",path:"/student/task-scheduler",icon:"bx bx-calendar-check"},{label:"My Notes",path:"/student/mynotes",icon:"bx bx-notepad"},{label:"Find Study Partner",path:"/student/find-partner",icon:"bx bx-user-plus"},{label:"Study Space",path:"/student/study-space",icon:"bx bx-group"}];function Y(){var t;const s=c(),a=d(),[r,n]=i.useState(!1),[o,l]=i.useState(null);i.useEffect(()=>{const e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]);const m=e=>a.pathname===e||a.pathname.includes(e),h=(null==(t=null==o?void 0:o.user_metadata)?void 0:t.full_name)||(null==o?void 0:o.fullName)||(null==o?void 0:o.email)||"Student";return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"lg:hidden fixed top-4 right-4 z-50 bg-gray-900 hover:bg-gray-800 text-orange-400 p-3 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-110",onClick:()=>n(!r),"aria-label":"Toggle sidebar",children:e.jsx("i",{className:`bx ${r?"bx-x":"bx-menu"} text-xl transition-transform duration-300`})}),e.jsxs("aside",{className:`bg-gradient-to-b from-gray-900 via-gray-900 to-black text-white fixed top-0 right-0 h-full w-72 z-40 flex flex-col shadow-2xl transform transition-all duration-300 ease-in-out\n          ${r?"translate-x-0":"translate-x-full"} lg:left-0 lg:right-auto lg:translate-x-0 lg:fixed lg:h-screen border-l border-gray-800`,children:[e.jsx("div",{className:"p-6 border-b border-gray-800 bg-gradient-to-r from-orange-500 to-orange-600",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx("i",{className:"bx bx-graduation text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"UniConnect"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Learning Hub"})]})]})}),e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors duration-300",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(h)}&background=ff6600&color=fff&size=40`,alt:"Avatar",className:"w-10 h-10 rounded-full border-2 border-orange-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm truncate",children:h}),e.jsx("p",{className:"text-gray-400 text-xs capitalize",children:(null==o?void 0:o.role)||"student"})]}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),e.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-xs uppercase text-gray-400 mb-3 pl-1 tracking-wider font-semibold",children:"Navigation"}),e.jsx("ul",{className:"space-y-2",children:Q.map((t,a)=>e.jsx("li",{className:"animate-fade-in-up",style:{animationDelay:50*a+"ms"},children:e.jsxs("button",{className:"flex items-center w-full px-4 py-3 rounded-xl transition-all duration-300 text-left group relative overflow-hidden "+(m(t.path)?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg transform scale-105":"hover:bg-gray-800 text-gray-300 hover:text-white hover:transform hover:scale-105"),onClick:()=>{s(t.path),n(!1)},children:[e.jsx("i",{className:`${t.icon} text-xl mr-3 transition-transform duration-300 group-hover:scale-110`}),e.jsx("span",{className:"font-medium",children:t.label}),m(t.path)&&e.jsx("div",{className:"absolute right-2",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})},t.path))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase text-gray-400 mb-3 pl-1 tracking-wider font-semibold flex items-center",children:[e.jsx("i",{className:"bx bx-brain mr-1 text-orange-500"}),"AI Tools"]}),e.jsx("ul",{className:"space-y-2",children:G.map((t,a)=>e.jsx("li",{className:"animate-fade-in-up",style:{animationDelay:50*(a+5)+"ms"},children:e.jsxs("button",{className:"flex items-center w-full px-4 py-3 rounded-xl transition-all duration-300 text-left group relative overflow-hidden "+(m(t.path)?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg transform scale-105":"hover:bg-gray-800 text-gray-300 hover:text-white hover:transform hover:scale-105"),onClick:()=>{s(t.path),n(!1)},children:[e.jsx("i",{className:`${t.icon} text-xl mr-3 transition-transform duration-300 group-hover:scale-110`}),e.jsx("span",{className:"font-medium",children:t.label}),m(t.path)&&e.jsx("div",{className:"absolute right-2",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})},t.path))})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-800 bg-gradient-to-r from-gray-900 to-black",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 flex items-center justify-center group shadow-lg",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s("/login")},children:[e.jsx("i",{className:"bx bx-log-out mr-2 text-lg group-hover:animate-bounce"}),"Logout"]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden backdrop-blur-sm transition-opacity duration-300",onClick:()=>n(!1),"aria-label":"Close sidebar overlay"})]})}const K=Object.create(null);K.open="0",K.close="1",K.ping="2",K.pong="3",K.message="4",K.upgrade="5",K.noop="6";const X=Object.create(null);Object.keys(K).forEach(e=>{X[K[e]]=e});const Z={type:"error",data:"parser error"},ee="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),te="function"==typeof ArrayBuffer,se=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ae=({type:e,data:t},s,a)=>ee&&t instanceof Blob?s?a(t):re(t,a):te&&(t instanceof ArrayBuffer||se(t))?s?a(t):re(new Blob([t]),a):a(K[e]+(t||"")),re=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+(e||""))},s.readAsDataURL(e)};function ne(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ie;const oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",le="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let ba=0;ba<64;ba++)le[oe.charCodeAt(ba)]=ba;const ce="function"==typeof ArrayBuffer,de=(e,t)=>{if("string"!=typeof e)return{type:"message",data:he(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:me(e.substring(1),t)};return X[s]?e.length>1?{type:X[s],data:e.substring(1)}:{type:X[s]}:Z},me=(e,t)=>{if(ce){const s=(e=>{let t,s,a,r,n,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)s=le[e.charCodeAt(t)],a=le[e.charCodeAt(t+1)],r=le[e.charCodeAt(t+2)],n=le[e.charCodeAt(t+3)],d[l++]=s<<2|a>>4,d[l++]=(15&a)<<4|r>>2,d[l++]=(3&r)<<6|63&n;return c})(e);return he(s,t)}return{base64:!0,data:e}},he=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,xe=String.fromCharCode(30);function ue(){return new TransformStream({transform(e,t){!function(e,t){ee&&e.data instanceof Blob?e.data.arrayBuffer().then(ne).then(t):te&&(e.data instanceof ArrayBuffer||se(e.data))?t(ne(e.data)):ae(e,!1,e=>{ie||(ie=new TextEncoder),t(ie.encode(e))})}(e,s=>{const a=s.length;let r;if(a<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,a);else if(a<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,a)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(s)})}})}let ge;function pe(e){return e.reduce((e,t)=>e+t.length,0)}function fe(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let a=0;for(let r=0;r<t;r++)s[r]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),s}function be(e){if(e)return function(e){for(var t in be.prototype)e[t]=be.prototype[t];return e}(e)}be.prototype.on=be.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},be.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},be.prototype.off=be.prototype.removeListener=be.prototype.removeAllListeners=be.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<a.length;r++)if((s=a[r])===t||s.fn===t){a.splice(r,1);break}return 0===a.length&&delete this._callbacks["$"+e],this},be.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(s){a=0;for(var r=(s=s.slice(0)).length;a<r;++a)s[a].apply(this,t)}return this},be.prototype.emitReserved=be.prototype.emit,be.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},be.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ye="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ve="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function je(e,...t){return t.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}const we=ve.setTimeout,Ne=ve.clearTimeout;function ke(e,t){t.useNativeTimers?(e.setTimeoutFn=we.bind(ve),e.clearTimeoutFn=Ne.bind(ve)):(e.setTimeoutFn=ve.setTimeout.bind(ve),e.clearTimeoutFn=ve.clearTimeout.bind(ve))}function Se(e){return"string"==typeof e?function(e){let t=0,s=0;for(let a=0,r=e.length;a<r;a++)t=e.charCodeAt(a),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(a++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))}function Ce(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class _e extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Ae extends be{constructor(e){super(),this.writable=!1,ke(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new _e(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=de(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}class Ee extends Ae{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const s=e.split(xe),a=[];for(let r=0;r<s.length;r++){const e=de(s[r],t);if(a.push(e),"error"===e.type)break}return a})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const s=e.length,a=new Array(s);let r=0;e.forEach((e,n)=>{ae(e,!1,e=>{a[n]=e,++r===s&&t(a.join(xe))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ce()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Te=!1;try{Te="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(fa){}const Ie=Te;function Le(){}class ze extends Ee{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class De extends be{constructor(e,t,s){super(),this.createRequest=e,ke(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;const t=je(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(a){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{s.setRequestHeader("Accept","*/*")}catch(a){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof s.status?s.status:0)},0))},s.send(this._data)}catch(a){return void this.setTimeoutFn(()=>{this._onError(a)},0)}"undefined"!=typeof document&&(this._index=De.requestsCount++,De.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Le,e)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete De.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(De.requestsCount=0,De.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Oe);else if("function"==typeof addEventListener){addEventListener("onpagehide"in ve?"pagehide":"unload",Oe,!1)}function Oe(){for(let e in De.requests)De.requests.hasOwnProperty(e)&&De.requests[e].abort()}const $e=function(){const e=Pe({xdomain:!1});return e&&null!==e.responseType}();function Pe(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Ie))return new XMLHttpRequest}catch(s){}if(!t)try{return new(ve[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}const qe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Re extends Ae{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=qe?{}:je(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(fa){return this.emitReserved("error",fa)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;ae(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(t){}a&&ye(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ce()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Be=ve.WebSocket||ve.MozWebSocket;const Me={websocket:class extends Re{createSocket(e,t,s){return qe?new Be(e,t,s):t?new Be(e,t):new Be(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Ae{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(fa){return this.emitReserved("error",fa)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){ge||(ge=new TextDecoder);const s=[];let a=0,r=-1,n=!1;return new TransformStream({transform(i,o){for(s.push(i);;){if(0===a){if(pe(s)<1)break;const e=fe(s,1);n=!(128&~e[0]),r=127&e[0],a=r<126?3:126===r?1:2}else if(1===a){if(pe(s)<2)break;const e=fe(s,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),a=3}else if(2===a){if(pe(s)<8)break;const e=fe(s,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>Math.pow(2,21)-1){o.enqueue(Z);break}r=n*Math.pow(2,32)+t.getUint32(4),a=3}else{if(pe(s)<r)break;const e=fe(s,r);o.enqueue(de(n?e:ge.decode(e),t)),a=0}if(0===r||r>e){o.enqueue(Z);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),a=ue();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const r=()=>{s.read().then(({done:e,value:t})=>{e||(this.onPacket(t),r())}).catch(e=>{})};r();const n={type:"open"};this.query.sid&&(n.data=`{"sid":"${this.query.sid}"}`),this._writer.write(n).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;this._writer.write(s).then(()=>{a&&ye(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ze{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=$e&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new De(Pe,this.uri(),e)}}},Ue=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Fe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function He(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),a=e.indexOf("]");-1!=s&&-1!=a&&(e=e.substring(0,s)+e.substring(s,a).replace(/:/g,";")+e.substring(a,e.length));let r=Ue.exec(e||""),n={},i=14;for(;i--;)n[Fe[i]]=r[i]||"";return-1!=s&&-1!=a&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){const s=/\/{2,9}/g,a=t.replace(s,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||a.splice(0,1);"/"==t.slice(-1)&&a.splice(a.length-1,1);return a}(0,n.path),n.queryKey=function(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,a){t&&(s[t]=a)}),s}(0,n.query),n}const Ve="function"==typeof addEventListener&&"function"==typeof removeEventListener,We=[];Ve&&addEventListener("offline",()=>{We.forEach(e=>e())},!1);class Je extends be{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const s=He(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=He(t.host).host);ke(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let a=0,r=s.length;a<r;a++){let e=s[a].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Ve&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},We.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Je.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Je.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s&&(e+=Se(s)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ye(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,a){if("function"==typeof t&&(a=t,t=void 0),"function"==typeof s&&(a=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Je.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ve&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=We.indexOf(this._offlineEventListener);-1!==e&&We.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Je.protocol=4;class Qe extends Je{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Je.priorWebsocketSuccess=!1;const a=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Je.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function r(){s||(s=!0,c(),t.close(),t=null)}const n=e=>{const s=new Error("probe error: "+e);s.transport=t.name,r(),this.emitReserved("upgradeError",s)};function i(){n("transport closed")}function o(){n("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",a),t.removeListener("error",n),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",a),t.once("error",n),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let Ge=class extends Qe{constructor(e,t={}){const s="object"==typeof e?e:t;(!s.transports||s.transports&&"string"==typeof s.transports[0])&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(e=>Me[e]).filter(e=>!!e)),super(e,s)}};const Ye="function"==typeof ArrayBuffer,Ke=Object.prototype.toString,Xe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ke.call(Blob),Ze="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ke.call(File);function et(e){return Ye&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Xe&&e instanceof Blob||Ze&&e instanceof File}function tt(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,s=e.length;t<s;t++)if(tt(e[t]))return!0;return!1}if(et(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return tt(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&tt(e[s]))return!0;return!1}function st(e){const t=[],s=e.data,a=e;return a.data=at(s,t),a.attachments=t.length,{packet:a,buffers:t}}function at(e,t){if(!e)return e;if(et(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let a=0;a<e.length;a++)s[a]=at(e[a],t);return s}if("object"==typeof e&&!(e instanceof Date)){const s={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=at(e[a],t));return s}return e}function rt(e,t){return e.data=nt(e.data,t),delete e.attachments,e}function nt(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=nt(e[s],t);else if("object"==typeof e)for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=nt(e[s],t));return e}const it=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var ot,lt;(lt=ot||(ot={}))[lt.CONNECT=0]="CONNECT",lt[lt.DISCONNECT=1]="DISCONNECT",lt[lt.EVENT=2]="EVENT",lt[lt.ACK=3]="ACK",lt[lt.CONNECT_ERROR=4]="CONNECT_ERROR",lt[lt.BINARY_EVENT=5]="BINARY_EVENT",lt[lt.BINARY_ACK=6]="BINARY_ACK";function ct(e){return"[object Object]"===Object.prototype.toString.call(e)}class dt extends be{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===ot.BINARY_EVENT;s||t.type===ot.BINARY_ACK?(t.type=s?ot.EVENT:ot.ACK,this.reconstructor=new mt(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!et(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===ot[s.type])throw new Error("unknown packet type "+s.type);if(s.type===ot.BINARY_EVENT||s.type===ot.BINARY_ACK){const a=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(a,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(r)}if("/"===e.charAt(t+1)){const a=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(a,t)}else s.nsp="/";const a=e.charAt(t+1);if(""!==a&&Number(a)==a){const a=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(!dt.isPayloadValid(s.type,a))throw new Error("invalid payload");s.data=a}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case ot.CONNECT:return ct(t);case ot.DISCONNECT:return void 0===t;case ot.CONNECT_ERROR:return"string"==typeof t||ct(t);case ot.EVENT:case ot.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===it.indexOf(t[0]));case ot.ACK:case ot.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mt{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=rt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ht=Object.freeze(Object.defineProperty({__proto__:null,Decoder:dt,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==ot.EVENT&&e.type!==ot.ACK||!tt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===ot.EVENT?ot.BINARY_EVENT:ot.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==ot.BINARY_EVENT&&e.type!==ot.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=st(e),s=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(s),a}},get PacketType(){return ot},protocol:5},Symbol.toStringTag,{value:"Module"}));function xt(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const ut=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gt extends be{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[xt(e,"open",this.onopen.bind(this)),xt(e,"packet",this.onpacket.bind(this)),xt(e,"error",this.onerror.bind(this)),xt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,a,r;if(ut.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:ot.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,s=t.pop();this._registerAckCallback(e,s),n.id=e}const i=null===(a=null===(s=this.io.engine)||void 0===s?void 0:s.transport)||void 0===a?void 0:a.writable,o=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!i||(o?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var s;const a=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===a)return void(this.acks[e]=t);const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},a),n=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};n.withError=!0,this.acks[e]=n}emitWithAck(e,...t){return new Promise((s,a)=>{const r=(e,t)=>e?a(e):s(t);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...a)=>{if(s!==this._queue[0])return;return null!==e?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...a)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ot.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ot.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ot.EVENT:case ot.BINARY_EVENT:this.onevent(e);break;case ot.ACK:case ot.BINARY_ACK:this.onack(e);break;case ot.DISCONNECT:this.ondisconnect();break;case ot.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...a){s||(s=!0,t.packet({type:ot.ACK,id:e,data:a}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ot.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function pt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}pt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+s:e-s}return 0|Math.min(e,this.max)},pt.prototype.reset=function(){this.attempts=0},pt.prototype.setMin=function(e){this.ms=e},pt.prototype.setMax=function(e){this.max=e},pt.prototype.setJitter=function(e){this.jitter=e};class ft extends be{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ke(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new pt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const a=t.parser||ht;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ge(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=xt(t,"open",function(){s.onopen(),e&&e()}),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=xt(t,"error",r);if(!1!==this._timeout){const e=this._timeout,s=this.setTimeoutFn(()=>{a(),r(new Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(a),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(xt(e,"ping",this.onping.bind(this)),xt(e,"data",this.ondata.bind(this)),xt(e,"error",this.onerror.bind(this)),xt(e,"close",this.onclose.bind(this)),xt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ye(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new gt(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t){if(this.nsps[s].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null===(s=this.engine)||void 0===s||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const bt={};function yt(e,t){"object"==typeof e&&(t=e,e=void 0);const s=function(e,t="",s){let a=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==s?s.protocol+"//"+e:"https://"+e),a=He(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const r=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+r+":"+a.port+t,a.href=a.protocol+"://"+r+(s&&s.port===a.port?"":":"+a.port),a}(e,(t=t||{}).path||"/socket.io"),a=s.source,r=s.id,n=s.path,i=bt[r]&&n in bt[r].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new ft(a,t):(bt[r]||(bt[r]=new ft(a,t)),o=bt[r]),s.query&&!t.query&&(t.query=s.queryKey),o.socket(s.path,t)}Object.assign(yt,{Manager:ft,Socket:gt,io:yt,connect:yt});const vt=e=>{const[t,s]=i.useState(null),[a,r]=i.useState(!1);return i.useEffect(()=>{if(!e)return;const t=yt("http://localhost:3004/api".replace("/api",""),{auth:{userId:e},transports:["websocket","polling"]});return t.on("connect",()=>{r(!0)}),t.on("disconnect",()=>{r(!1)}),s(t),()=>{t.disconnect()}},[e]),{socket:t,isConnected:a}};function jt({message:t,type:s="info",onClose:a,duration:r=3e3}){i.useEffect(()=>{const e=setTimeout(a,r);return()=>clearTimeout(e)},[a,r]);let n="bg-blue-600";return"success"===s&&(n="bg-green-600"),"error"===s&&(n="bg-red-600"),e.jsxs("div",{className:`fixed top-6 right-6 z-50 px-6 py-4 rounded shadow-lg text-white font-semibold ${n} animate-fade-in`,style:{minWidth:200},role:"alert",children:[t,e.jsx("button",{className:"ml-4 text-white font-bold",onClick:a,"aria-label":"Close",children:"Ã—"})]})}function wt(){return new Promise(e=>{"Notification"in window?"granted"===Notification.permission?e("granted"):"denied"===Notification.permission?e("denied"):Notification.requestPermission().then(e):e("denied")})}async function Nt(e,t){if("Notification"in window){if("granted"!==Notification.permission)try{if("granted"!==await Notification.requestPermission())return jt({message:e+((null==t?void 0:t.body)?": "+t.body:""),onClose:()=>{}}),null}catch{return jt({message:e+((null==t?void 0:t.body)?": "+t.body:""),onClose:()=>{}}),null}!function(){try{new window.Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=").play()}catch(e){}}();const s=new Notification(e,{icon:"/logo.png",badge:"/logo.png",tag:"uniconnect-notification",requireInteraction:!1,silent:!1,...t});return(null==t?void 0:t.requireInteraction)||setTimeout(()=>s.close(),5e3),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"show-notification",title:e,options:{icon:"/logo.png",badge:"/logo.png",...t}}),s}return jt({message:e+((null==t?void 0:t.body)?": "+t.body:""),onClose:()=>{}}),null}async function kt(e,t){const s={assignment:{title:`ðŸ“š Assignment: ${t.title}`,body:`Due ${t.dueDate}. ${t.description||"Click to view details."}`,requireInteraction:!0,tag:"assignment-due"},study_session:{title:`ðŸ‘¥ Study Session with ${t.partnerName}`,body:`Starting ${t.startTime}. ${t.subject?`Subject: ${t.subject}`:"Click to join."}`,requireInteraction:!0,tag:"study-session"},achievement:{title:"ðŸ† Achievement Unlocked!",body:t.message||"You've reached a new milestone. Great work!",requireInteraction:!1,tag:"achievement"},message:{title:`ðŸ’¬ New message from ${t.senderName}`,body:t.preview||"Click to read the message.",requireInteraction:!1,tag:"new-message"},reminder:{title:`â° Reminder: ${t.title}`,body:t.message||"You have an upcoming task.",requireInteraction:!0,tag:"reminder"}}[e];if(s){const{actions:e,...a}={body:s.body,requireInteraction:s.requireInteraction,tag:s.tag,...t};return await Nt(s.title,a)}return null}function St(e,t){i.useEffect(()=>{if(e&&t)return e.on("assignment-due-soon",e=>{kt("assignment",{title:e.title,dueDate:new Date(e.due_date).toLocaleDateString(),description:`Due in ${e.hours_remaining} hours`})}),e.on("study-session-starting",e=>{kt("study_session",{partnerName:e.partner_name,startTime:new Date(e.start_time).toLocaleTimeString(),subject:e.subject})}),e.on("achievement-unlocked",e=>{kt("achievement",{message:e.message})}),e.on("new-message",e=>{kt("message",{senderName:e.sender_name,preview:e.content.substring(0,50)+(e.content.length>50?"...":"")})}),()=>{e.off("assignment-due-soon"),e.off("study-session-starting"),e.off("achievement-unlocked"),e.off("new-message")}},[e,t])}const Ct=Object.freeze(Object.defineProperty({__proto__:null,requestNotificationPermission:wt,showNotification:Nt,showStudentNotification:kt,useStudentNotifications:St},Symbol.toStringTag,{value:"Module"})),_t=({userId:t})=>{const[s,a]=i.useState([]),{socket:r}=vt(t);i.useEffect(()=>{if(r&&t)return r.on("new-notification",e=>{const t={id:e.id||Date.now().toString(),title:e.title||"New Notification",message:e.message||"",type:"urgent"===e.priority?"error":"high"===e.priority?"warning":"info",duration:"urgent"===e.priority?0:5e3};a(e=>[...e,t])}),r.on("study-partner-request",e=>{var t,s;const r={id:Date.now().toString(),title:"ðŸ‘¥ New Study Partner Request",message:`${(null==(t=null==e?void 0:e.requester)?void 0:t.full_name)||(null==(s=null==e?void 0:e.requester)?void 0:s.email)||"Someone"} wants to be your study partner!`,type:"info",duration:0};a(e=>[...e,r])}),r.on("assignment-due-soon",e=>{const t={id:Date.now().toString(),title:"â° Assignment Due Soon",message:`${e.title} is due in ${e.hours_remaining} hours!`,type:e.hours_remaining<=2?"error":"warning",duration:0};a(e=>[...e,t])}),r.on("study-session-starting",e=>{const t={id:Date.now().toString(),title:"ðŸ“š Study Session Starting",message:`Your session with ${e.partner_name} is starting now!`,type:"info",duration:8e3};a(e=>[...e,t])}),r.on("achievement-unlocked",e=>{const t={id:Date.now().toString(),title:"ðŸ† Achievement Unlocked!",message:e.message,type:"success",duration:6e3};a(e=>[...e,t])}),()=>{r.off("new-notification"),r.off("study-partner-request"),r.off("assignment-due-soon"),r.off("study-session-starting"),r.off("achievement-unlocked")}},[r,t]);const n=e=>{a(t=>t.filter(t=>t.id!==e))};i.useEffect(()=>{s.forEach(e=>{if(e.duration&&e.duration>0){const t=setTimeout(()=>{n(e.id)},e.duration);return()=>clearTimeout(t)}})},[s]);const o=e=>{switch(e){case"success":return"bg-green-600 border-green-500 text-white";case"warning":return"bg-yellow-600 border-yellow-500 text-white";case"error":return"bg-red-600 border-red-500 text-white";default:return"bg-blue-600 border-blue-500 text-white"}};return 0===s.length?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:s.map(t=>e.jsxs("div",{className:`p-4 rounded-lg border-l-4 shadow-lg animate-slide-in ${o(t.type)}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-sm opacity-90",children:t.message})]}),e.jsx("button",{onClick:()=>n(t.id),className:"ml-2 text-white hover:text-gray-200 flex-shrink-0",children:e.jsx("i",{className:"bx bx-x text-lg"})})]}),"info"===t.type&&t.title.includes("Study Partner")&&e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx("button",{onClick:()=>{window.location.href="/student/notifications",n(t.id)},className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-xs font-medium transition-colors",children:"View Request"})})]},t.id))})};function At(){const t=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return null}})(),{socket:s}=vt(t);return i.useEffect(()=>{wt()},[]),St(s,t),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex",children:[e.jsx(Y,{}),e.jsx("div",{className:"flex-1 lg:ml-72 min-h-screen",children:e.jsxs("main",{className:"w-full min-h-screen overflow-auto",children:[e.jsx(x,{})," "]})}),e.jsx(_t,{userId:t})]})}const Et="http://localhost:3004/api",Tt=50,It=()=>{const[t,s]=i.useState([{sender:"ai",text:"Hi there! ðŸ‘‹ I'm your Study Buddy. I'm here to help you with your studies, answer questions, explain concepts, and support your learning journey. What would you like to explore today?",timestamp:new Date}]),[a,r]=i.useState(""),[n,o]=i.useState(!1),[l,c]=i.useState(!1),[d,m]=i.useState(null),[h,x]=i.useState(null),[u,g]=i.useState({}),p=i.useRef(null),f=i.useRef(null),b=i.useRef(null);i.useEffect(()=>{(async()=>{const e=localStorage.getItem("token")||"";try{const t=await fetch(`${Et}/notes`,{headers:{Authorization:`Bearer ${e}`}}),s=((await t.json()).notes||[]).map(e=>e.content||e.text||e.name||"").filter(Boolean),a=[],r=await fetch(`${Et}/ai/learning-path`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({performanceData:{quizResults:[],notes:[],completedLessons:[]}})}),n=(await r.json()).learningPath||[];g({notes:s,quizResults:a,learningPath:n})}catch(fa){g({})}})()},[]),i.useEffect(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[t,l]),i.useEffect(()=>{var e;null==(e=f.current)||e.focus()},[]),i.useEffect(()=>()=>{b.current&&clearTimeout(b.current),d&&URL.revokeObjectURL(d)},[d]);const y=i.useCallback(()=>{d&&URL.revokeObjectURL(d),m(null),x(null)},[d]),v=async()=>{if(!a.trim()&&!h)return;const e={sender:"user",text:a.trim()||(h?"Uploaded an image":""),timestamp:new Date,imageUrl:d||void 0};s(t=>{const s=[...t,e];return s.length>Tt?s.slice(-50):s}),r(""),o(!0),c(!0);try{const e=localStorage.getItem("token");let t,r;if(h){const s=new FormData;s.append("image",h),s.append("message",a.trim()),s.append("context",JSON.stringify(u)),t=await fetch(`${Et}/ai/chat`,{method:"POST",headers:{Authorization:`Bearer ${e||""}`},body:s}),r=await t.json()}else t=await fetch(`${Et}/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e||""}`},body:JSON.stringify({message:a.trim(),context:u})}),r=await t.json();if(!t.ok)throw new Error(r.message||"AI error");b.current=setTimeout(()=>{s(e=>{const t=[...e,{sender:"ai",text:h?r.reply||r.explanation||"Here's what I see in your image.":r.reply||"I'm here to help you learn! ðŸ“š",timestamp:new Date}];return t.length>Tt?t.slice(-50):t}),c(!1)},1e3)}catch(fa){b.current=setTimeout(()=>{s(e=>{const t=[...e,{sender:"ai",text:h?"Sorry, I couldn't analyze the image. Please try again! ðŸ”„":"Sorry, I'm having trouble connecting right now. Please try again in a moment! ðŸ”„",timestamp:new Date}];return t.length>Tt?t.slice(-50):t}),c(!1)},1e3)}finally{o(!1),y()}},j=i.useCallback(e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s&&s.type.startsWith("image/")&&s.size<5242880){y(),x(s);const e=new FileReader;e.onload=e=>{var t;return m(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},[y]),w=i.useCallback(e=>{const t=e.clipboardData.items;for(let s=0;s<t.length;s++){const e=t[s];if(e.type.startsWith("image/")){const t=e.getAsFile();if(t&&t.size<5242880){y(),x(t);const e=new FileReader;e.onload=e=>{var t;return m(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(t)}}}},[y]);return e.jsxs("div",{className:"h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 sm:px-6 sm:py-4 animate-fade-in-up flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[e.jsx("div",{className:"bg-orange-500 bg-opacity-20 p-2 sm:p-3 rounded-xl",children:e.jsx("i",{className:"bx bx-message-dots text-xl sm:text-2xl text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white",children:"Study Buddy"}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Your AI learning companion"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 text-xs sm:text-sm font-medium",children:"Online"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-4 sm:px-6 sm:py-6 space-y-4 sm:space-y-6 bg-gray-800",children:[t.map((t,s)=>{return e.jsxs("div",{className:"flex items-start space-x-3 animate-fade-in-up "+("user"===t.sender?"flex-row-reverse space-x-reverse":""),style:{animationDelay:100*s+"ms"},children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center "+("user"===t.sender?"bg-orange-500":"bg-gradient-to-r from-blue-500 to-purple-500"),children:e.jsx("i",{className:`bx ${"user"===t.sender?"bx-user":"bx-bot"} text-white text-lg`})}),e.jsxs("div",{className:"flex flex-col max-w-[70%] "+("user"===t.sender?"items-end":"items-start"),children:[e.jsxs("div",{className:"px-4 py-3 rounded-2xl shadow-lg "+("user"===t.sender?"bg-orange-500 text-white rounded-tr-md":"bg-gray-700 text-white rounded-tl-md border border-gray-600"),children:[t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:"Uploaded",className:"mb-2 rounded-lg max-w-xs"}),"ai"===t.sender?e.jsx("div",{className:"text-sm leading-relaxed prose prose-invert prose-sm max-w-none",children:e.jsx(N,{components:{p:({children:t})=>e.jsx("p",{className:"mb-2 last:mb-0",children:t}),ul:({children:t})=>e.jsx("ul",{className:"list-disc list-inside mb-2",children:t}),ol:({children:t})=>e.jsx("ol",{className:"list-decimal list-inside mb-2",children:t}),li:({children:t})=>e.jsx("li",{className:"mb-1",children:t}),code:({children:t})=>e.jsx("code",{className:"bg-gray-600 px-1 py-0.5 rounded text-xs",children:t}),pre:({children:t})=>e.jsx("pre",{className:"bg-gray-600 p-2 rounded mt-2 overflow-x-auto text-xs",children:t}),strong:({children:t})=>e.jsx("strong",{className:"font-semibold",children:t}),em:({children:t})=>e.jsx("em",{className:"italic",children:t}),h1:({children:t})=>e.jsx("h1",{className:"text-lg font-bold mb-2",children:t}),h2:({children:t})=>e.jsx("h2",{className:"text-base font-bold mb-2",children:t}),h3:({children:t})=>e.jsx("h3",{className:"text-sm font-bold mb-1",children:t})},children:t.text})}):e.jsx("p",{className:"text-sm leading-relaxed",children:t.text})]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 px-2",children:(a=t.timestamp,a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]})]},s);var a}),l&&e.jsxs("div",{className:"flex items-start space-x-3 animate-fade-in-up",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:e.jsx("i",{className:"bx bx-bot text-white text-lg"})}),e.jsx("div",{className:"bg-gray-700 px-4 py-3 rounded-2xl rounded-tl-md border border-gray-600",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:p})]}),1===t.length&&e.jsxs("div",{className:"px-2 py-3 sm:px-6 sm:py-4 border-t border-gray-700 bg-gray-800 flex-shrink-0",children:[e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3",children:"Quick prompts to get started:"}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:["Explain a concept","Help with homework","Study tips","Quiz me"].map((t,s)=>e.jsx("button",{onClick:()=>r(t),className:"px-2 py-1 sm:px-3 sm:py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 text-xs sm:text-sm rounded-lg transition-colors border border-gray-600 hover:border-orange-500",children:t},s))})]}),e.jsxs("div",{className:"px-2 py-3 sm:px-6 sm:py-4 border-t border-gray-700 bg-gray-800 flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-3 space-y-2 sm:space-y-0",children:[d&&e.jsxs("div",{className:"flex items-center space-x-1 mb-2 sm:mb-0",children:[e.jsx("img",{src:d,alt:"Preview",className:"rounded-lg",style:{width:40,height:40,objectFit:"cover"}}),e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-red-500 text-xs ml-1",title:"Remove",children:e.jsx("i",{className:"bx bx-x"})})]}),e.jsxs("div",{className:"flex-1 relative flex items-center w-full",children:[e.jsx("input",{ref:f,type:"text",className:"w-full px-3 py-2 sm:px-4 sm:py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:ring-opacity-20 transition-all duration-300 text-sm sm:text-base",placeholder:"Ask me anything about your studies... (or what to do with your image)",value:a,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||n||!a.trim()&&!h||v()},onPaste:w,disabled:n}),a&&e.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"bx bx-x text-lg"})})]}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"image-upload",onChange:j,disabled:n}),e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer mt-2 sm:mt-0",children:e.jsxs("span",{className:"px-3 py-2 sm:px-4 sm:py-3 bg-gray-700 border border-gray-600 rounded-xl text-white hover:bg-gray-600 transition-colors flex items-center space-x-1 sm:space-x-2 text-xs sm:text-base",children:[e.jsx("i",{className:"bx bx-image text-lg"}),e.jsx("span",{children:"Upload Photo"})]})}),e.jsx("button",{onClick:v,disabled:n||!a.trim()&&!h,className:"mt-2 sm:mt-0 px-4 py-2 sm:px-6 sm:py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-1 sm:space-x-2 text-xs sm:text-base "+(n||!a.trim()&&!h?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg transform hover:scale-105"),children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Send"}),e.jsx("i",{className:"bx bx-send text-lg"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Press Enter to send â€¢ You can upload or paste a photo and type what you want Study Buddy to do with it"})]})]})};async function Lt(e,t){const s=await fetch(e,t);if(401===s.status)throw window.location.href="/login",new Error("Unauthorized: Redirecting to login");return s}const zt="http://localhost:3004/api",Dt=({partnerId:t})=>{const[s,a]=i.useState(null),[r,n]=i.useState(!1),{socket:l,isConnected:c}=vt(null==s?void 0:s.id),[d,m]=i.useState([]),[h,x]=i.useState(null),[u,g]=i.useState([]),[p,f]=i.useState(!1),[b,y]=i.useState(""),[v,j]=i.useState(!1),[w,S]=i.useState(""),[C,_]=i.useState([]),[A,E]=i.useState(!1),[T,I]=i.useState(new Set),[L,z]=i.useState(null),[D,O]=i.useState(""),[$,P]=i.useState(null),[q,R]=i.useState(!1),B=i.useRef(null),M=i.useRef(null);i.useEffect(()=>{const e=localStorage.getItem("user");e&&a(JSON.parse(e))},[]);const U=h&&(null==s?void 0:s.id)?u.filter(e=>e.senderId===s.id&&e.receiverId===h.user.id||e.senderId===h.user.id&&e.receiverId===s.id||"ai"===e.senderId&&e.receiverId===h.user.id):[];i.useEffect(()=>{if(l&&(null==s?void 0:s.id))return l.on("newMessage",e=>{h&&(null==s?void 0:s.id)&&(e.senderId===s.id&&e.receiverId===h.user.id||e.senderId===h.user.id&&e.receiverId===s.id||"ai"===e.senderId&&e.receiverId===h.user.id)&&(g(t=>{const s=t.filter(t=>!(t.id.startsWith("temp-")&&t.senderId===e.senderId&&t.content===e.content));return s.some(t=>t.id===e.id)?s:[...s,{...e,timestamp:new Date(e.timestamp)}]}),e.senderId!==h.user.id||"undefined"==typeof window||"visible"===document.visibilityState&&document.hasFocus()||k(async()=>{const{showStudentNotification:e}=await Promise.resolve().then(()=>Ct);return{showStudentNotification:e}},void 0).then(({showStudentNotification:t})=>{t("message",{senderName:h.user.user_metadata.full_name||h.user.email,preview:e.content})}))}),l.on("userTyping",({userId:e,isTyping:t})=>{I(s=>{const a=new Set(s);return t?a.add(e):a.delete(e),a})}),l.on("messageEdited",e=>{g(t=>t.map(t=>t.id===e.id?e:t))}),l.on("messageDeleted",({messageId:e})=>{g(t=>t.filter(t=>t.id!==e))}),()=>{l.off("newMessage"),l.off("userTyping"),l.off("messageEdited"),l.off("messageDeleted")}},[l,null==s?void 0:s.id,d,h]),i.useEffect(()=>{var e;null==(e=B.current)||e.scrollIntoView({behavior:"smooth"})},[U]),i.useEffect(()=>{if(t&&(null==s?void 0:s.id)){x({id:t,user:{id:t,email:"",user_metadata:{full_name:"Study Partner"}},is_online:!1,last_seen:null,is_typing:!1}),g([]),F(t)}else x(null),g([])},[t,null==s?void 0:s.id]);const F=async e=>{f(!0);try{if(!e)return void f(!1);const t=localStorage.getItem("token"),a=await Lt(`${zt}/chat/messages/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)return P({type:"error",message:`Failed to load messages (${a.status}): ${a.statusText}`}),void f(!1);const r=await a.json();if(!Array.isArray(r))return P({type:"error",message:"Invalid response format from server."}),void f(!1);const n=r.map(e=>({...e,timestamp:new Date(e.timestamp)}));g(t=>[...t.filter(t=>!(t.senderId===(null==s?void 0:s.id)&&t.receiverId===e||t.senderId===e&&t.receiverId===(null==s?void 0:s.id))),...n])}catch(t){P({type:"error",message:`Error loading messages: ${(null==t?void 0:t.message)||"Unknown error"}`})}finally{f(!1)}},H=async()=>{if(!s||!s.id)return void P({type:"error",message:"User not loaded. Please log in again."});if(!h)return void P({type:"error",message:"No study mate selected."});if(!l||!c)return void P({type:"error",message:"Not connected to chat server."});if(!b.trim())return;const e=b.trim();if(e.match(/^@(?:studybuddy|ai|assistant)\s+/i)){const t=e.replace(/^@(?:studybuddy|ai|assistant)\s+/i,"").trim();if(!t)return void P({type:"error",message:"Please enter a question for the AI."});n(!0),y(""),V();const a=new Date,r={id:`temp-user-${Date.now()}`,senderId:s.id,receiverId:h.user.id,content:`@studybuddy ${t}`,timestamp:a,isEdited:!1};g(e=>[...e,r]);try{const e=localStorage.getItem("token"),r=await Lt(`${zt}/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({message:t,context:{userId:s.id,partnerId:h.user.id}})});let n="Sorry, I could not answer that.";if(r.ok){const e=await r.json();n=e.reply||e.answer||e.response||n}const i={id:`ai-${Date.now()}`,senderId:"ai",receiverId:h.user.id,content:n,timestamp:new Date(a.getTime()+1e3),isEdited:!1};g(e=>[...e,i]),await K({senderId:s.id,receiverId:h.user.id,content:`@studybuddy ${t}`,timestamp:a,isEdited:!1}),await K({senderId:"ai",receiverId:h.user.id,content:n,timestamp:new Date(a.getTime()+1e3),isEdited:!1}),l.emit("sendMessage",{senderId:s.id,receiverId:h.user.id,content:`@studybuddy ${t}`}),l.emit("sendMessage",{senderId:"ai",receiverId:h.user.id,content:n})}catch(fa){const t={id:`ai-error-${Date.now()}`,senderId:"ai",receiverId:h.user.id,content:"Sorry, I encountered an error. Please try again.",timestamp:new Date(a.getTime()+1e3),isEdited:!1};g(e=>[...e,t]),P({type:"error",message:"Failed to get AI response."})}finally{n(!1)}return}const t={id:`temp-${Date.now()}`,senderId:s.id,receiverId:h.user.id,content:e,timestamp:new Date,isEdited:!1};g(e=>[...e,t]),l.emit("sendMessage",{senderId:s.id,receiverId:h.user.id,content:e}),y(""),V()},V=()=>{A&&h&&l&&(E(!1),l.emit("typing",{senderId:s.id,receiverId:h.user.id,isTyping:!1}))},W=(e,t)=>{z(e),O(t)},J=()=>{L&&l&&(l.emit("editMessage",{messageId:L,userId:s.id,content:D}),z(null),O(""))},Q=e=>{l&&h&&l.emit("deleteMessage",{messageId:e,userId:s.id,receiverId:h.user.id})},G=e=>{const t=new Date(e.timestamp),a=((new Date).getTime()-t.getTime())/6e4;return e.senderId===(null==s?void 0:s.id)&&a<=15},Y=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),K=async e=>{try{const t=localStorage.getItem("token");await Lt(`${zt}/chat/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({senderId:e.senderId,receiverId:e.receiverId,content:e.content,timestamp:e.timestamp.toISOString()})})}catch(t){}};return e.jsxs("div",{className:"h-full bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col",children:[$&&e.jsx(jt,{type:$.type,message:$.message,onClose:()=>P(null)}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 min-h-0 p-4 space-y-4 overflow-y-auto overflow-x-hidden",children:p?e.jsx("div",{className:"text-center text-gray-400 mt-8",children:e.jsx("p",{children:"Loading messages..."})}):0===U.length?e.jsx("div",{className:"text-center text-gray-400 mt-8",children:e.jsx("p",{children:"No messages yet. Start the conversation!"})}):e.jsxs(e.Fragment,{children:[(e=>{const t=[];let a=0;for(;a<e.length;){const r=e[a];if(r.senderId===(null==s?void 0:s.id)&&r.content.startsWith("@studybuddy")){const s=e[a+1];if(s&&"ai"===s.senderId){t.push({question:r,ai:s}),a+=2;continue}t.push({question:r}),a+=1;continue}"ai"!==r.senderId?(t.push({normal:r}),a+=1):(t.push({ai:r}),a+=1)}return t})(U).map((t,a)=>{var r,n,i;return e.jsxs(o.Fragment,{children:[t.question&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"max-w-[85%] sm:max-w-xs md:max-w-sm lg:max-w-md px-3 py-2 rounded-lg break-words bg-orange-500 text-white",children:[e.jsx("p",{children:t.question.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs opacity-70",children:[Y(t.question.timestamp),t.question.isEdited&&" (edited)"]}),t.question.senderId===(null==s?void 0:s.id)&&e.jsxs("div",{className:"flex space-x-1",children:[G(t.question)&&e.jsx("button",{onClick:()=>W(t.question.id,t.question.content),className:"text-xs opacity-70 hover:opacity-100",children:e.jsx("i",{className:"bx bx-edit"})}),e.jsx("button",{onClick:()=>Q(t.question.id),className:"text-xs opacity-70 hover:opacity-100",children:e.jsx("i",{className:"bx bx-trash"})})]})]})]})}),t.ai&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] sm:max-w-xs md:max-w-sm lg:max-w-md px-3 py-2 rounded-lg break-words bg-blue-600 text-white border-l-4 border-blue-400",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"bx bx-bot text-blue-300 mr-1"}),e.jsx("span",{className:"text-xs font-semibold text-blue-300",children:"StudyBuddy AI"})]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(N,{children:t.ai.content})}),e.jsx("div",{className:"flex items-center justify-between mt-1",children:e.jsxs("span",{className:"text-xs opacity-70",children:[Y(t.ai.timestamp),t.ai.isEdited&&" (edited)"]})})]})}),t.normal&&e.jsx("div",{className:"flex "+(t.normal.senderId===(null==s?void 0:s.id)?"justify-end":"justify-start"),children:e.jsx("div",{className:"max-w-[85%] sm:max-w-xs md:max-w-sm lg:max-w-md px-3 py-2 rounded-lg break-words "+(t.normal.senderId===(null==s?void 0:s.id)?"bg-orange-500 text-white":"bg-gray-700 text-white"),children:L===t.normal.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:D,onChange:e=>O(e.target.value),className:"w-full bg-transparent border-b border-gray-300 focus:outline-none",onKeyPress:e=>"Enter"===e.key&&J()}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:J,className:"text-xs bg-green-500 px-2 py-1 rounded",children:"Save"}),e.jsx("button",{onClick:()=>z(null),className:"text-xs bg-gray-500 px-2 py-1 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:t.normal.content}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs opacity-70",children:[Y(t.normal.timestamp),t.normal.isEdited&&" (edited)"]}),t.normal.senderId===(null==s?void 0:s.id)&&e.jsxs("div",{className:"flex space-x-1",children:[G(t.normal)&&e.jsx("button",{onClick:()=>W(t.normal.id,t.normal.content),className:"text-xs opacity-70 hover:opacity-100",children:e.jsx("i",{className:"bx bx-edit"})}),e.jsx("button",{onClick:()=>Q(t.normal.id),className:"text-xs opacity-70 hover:opacity-100",children:e.jsx("i",{className:"bx bx-trash"})})]})]})]})})})]},(null==(r=t.question)?void 0:r.id)||(null==(n=t.ai)?void 0:n.id)||(null==(i=t.normal)?void 0:i.id)||a)}),r&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] sm:max-w-xs md:max-w-sm lg:max-w-md px-3 py-2 rounded-lg bg-gray-700 text-white flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-orange-400",children:"@studybuddy"}),e.jsx("span",{className:"animate-pulse",children:"AI is typing..."})]})}),e.jsx("div",{ref:B})]})}),e.jsx("div",{className:"bg-gray-800 border-t border-gray-700 p-3 sm:p-4",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:b,onChange:e=>{y(e.target.value),h&&l&&(A||(E(!0),l.emit("typing",{senderId:s.id,receiverId:h.user.id,isTyping:!0})),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{V()},2e3));const t=e.target.value,a=e.target.selectionStart||0;"@"!==t[a-1]||1!==a&&" "!==t[a-2]?t.includes("@")||j(!1):j(!0)},onKeyDown:e=>{!v||"Enter"!==e.key&&"Tab"!==e.key?"Escape"===e.key&&j(!1):(e.preventDefault(),y(e=>e.replace(/@$/,"@studybuddy ")),j(!1))},onBlur:()=>setTimeout(()=>j(!1),100),onFocus:e=>{const t=e.target.value,s=e.target.selectionStart||0;"@"!==t[s-1]||1!==s&&" "!==t[s-2]||j(!0)},onKeyPress:e=>"Enter"===e.key&&H(),placeholder:"Type a message...",className:"w-full max-w-2xl bg-gray-700 text-white px-3 py-2 sm:px-4 sm:py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm sm:text-base"}),v&&e.jsx("div",{className:"absolute left-0 bottom-full mb-1 z-50 bg-gray-800 border border-orange-400 rounded shadow-lg w-56",children:e.jsxs("button",{type:"button",className:"w-full text-left px-4 py-2 hover:bg-orange-500 hover:text-white text-orange-400 font-semibold rounded transition-colors",onMouseDown:e=>{e.preventDefault(),y(e=>e.replace(/@$/,"@studybuddy ")),j(!1)},children:[e.jsx("span",{className:"font-bold",children:"@studybuddy"})," ",e.jsx("span",{className:"text-xs text-gray-300",children:"Ask the AI assistant"})]})})]}),e.jsx("button",{onClick:H,disabled:!b.trim(),className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white px-4 py-2 sm:px-6 sm:py-2 rounded-lg transition-colors flex-shrink-0",children:e.jsx("i",{className:"bx bx-send text-sm sm:text-base"})})]})})]}):e.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("i",{className:"bx bx-message-dots text-4xl sm:text-6xl mb-4"}),e.jsx("p",{className:"text-lg sm:text-xl",children:"Select a study mate to start chatting"})]})})]})},Ot="http://localhost:3004/api";function $t(){const[t,s]=i.useState("text"),[a,r]=i.useState(""),[n,l]=i.useState(null),[c,d]=i.useState(5),[m,h]=i.useState(!1),[x,u]=i.useState([]),[g,p]=i.useState(""),[f,b]=i.useState(!1),[y,v]=i.useState("5"),[j,w]=i.useState(!1),[N,k]=i.useState(!1),[S,C]=i.useState(0),[_,A]=i.useState(""),[E,T]=i.useState(0),[I,L]=i.useState(0),[z,D]=i.useState(""),[O,$]=i.useState(!1),[P,q]=i.useState(0),[R,B]=i.useState(!1);o.useEffect(()=>{O&&E>0&&x.length>0&&(async()=>{try{const e=localStorage.getItem("token")||"";await fetch(`${Ot}/notes/flashcard-score`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({score:E,bonus:P,numQuestions:x.length,timestamp:(new Date).toISOString()})})}catch(fa){}})()},[O]);const[M,U]=i.useState(!1),F=async()=>{if(!N||O||R||M)return;B(!0);const e=x[S];let t=E,s=I,a=P,r=!1,n="";try{const t=localStorage.getItem("token")||"",s=await fetch(`${Ot}/ai/check-flashcard-answer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({question:e.question,answer:e.answer,userAnswer:_})});if(!s.ok)throw new Error("AI answer check failed");const a=await s.json();r=a.correct,n=a.feedback||""}catch(fa){r=!1,n="Could not check answer. Please try again."}r?(t+=1,s+=1,D("Correct! +1 point"),s>0&&s%5==0&&(t+=2,a+=2,D("Correct! +1 point (+2 streak bonus!)"))):(D(n?`Incorrect. ${n}`:"Incorrect. 0 points"),s=0),T(t),L(s),q(a),U(!0),B(!1)};return e.jsxs("div",{className:"min-h-screen w-full bg-black flex flex-col items-center px-2 sm:px-4 py-4 sm:py-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-orange-400 mb-6 sm:mb-8 text-center",children:"Flashcard Generator"}),e.jsx("div",{className:"bg-gray-900 rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-lg mb-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 py-2 rounded "+("text"===t?"bg-orange-500 text-white":"bg-gray-800 text-gray-300"),onClick:()=>s("text"),disabled:N,children:"Paste Text"}),e.jsx("button",{className:"flex-1 py-2 rounded "+("file"===t?"bg-orange-500 text-white":"bg-gray-800 text-gray-300"),onClick:()=>s("file"),disabled:N,children:"Upload PDF/DOCX"})]}),"text"===t?e.jsx("textarea",{className:"w-full h-32 p-3 rounded bg-gray-800 text-white border border-gray-700 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50 transition",placeholder:"Paste your study material here...",value:a,onChange:e=>r(e.target.value),disabled:N}):e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-700",onChange:e=>{var t;return l((null==(t=e.target.files)?void 0:t[0])||null)},disabled:N}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Number of Questions"}),e.jsx("input",{type:"number",min:1,max:50,value:c,onChange:e=>d(Number(e.target.value)),className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-700",disabled:N})]}),e.jsx("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded font-semibold transition mt-2",onClick:async()=>{h(!0),p(""),u([]);try{let e;const s=localStorage.getItem("token")||"";if("file"===t&&n){const t=new FormData;t.append("file",n),t.append("numQuestions",c.toString()),e=await fetch(`${Ot}/ai/flashcards`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:t})}else e=await fetch(`${Ot}/ai/flashcards`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({text:a,numQuestions:c})});if(!e.ok)throw new Error("Failed to generate flashcards");const r=await e.json();u(r.flashcards||[])}catch(fa){p(fa.message||"Unknown error")}finally{h(!1)}},disabled:m||!a&&!n||N,children:m?"Generating...":"Generate Flashcards"}),g&&e.jsx("div",{className:"bg-red-900 text-red-300 p-2 rounded mt-2 text-center",children:g})]})}),e.jsxs("div",{className:"w-full max-w-2xl",children:[x.length>0&&!N&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-orange-400 mb-4 text-center",children:"Generated Flashcards"}),e.jsx("div",{className:"flex flex-col gap-6",children:x.map((t,s)=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 flex flex-col",children:[e.jsxs("div",{className:"font-semibold text-gray-900 mb-2",children:["Q",s+1,": ",t.question]}),e.jsxs("div",{className:"text-gray-700 mb-2",children:[e.jsx("span",{className:"font-bold",children:"Answer:"})," ",t.answer]}),e.jsx("button",{className:"self-start bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded font-semibold text-xs sm:text-base",onClick:()=>(async e=>{u(t=>t.map((t,s)=>s===e?{...t,explanation:"Loading explanation..."}:t));try{const t=localStorage.getItem("token")||"",s=x[e],a=await fetch(`${Ot}/ai/explain-flashcard`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({question:s.question,answer:s.answer})});if(!a.ok)throw new Error("Failed to get explanation");const r=await a.json();u(t=>t.map((t,s)=>s===e?{...t,explanation:r.explanation}:t))}catch(fa){u(s=>s.map((s,a)=>a===e?{...s,explanation:fa.message||"Error getting explanation"}:s))}})(s),children:"Explain"}),t.explanation&&e.jsx("div",{className:"mt-2 p-3 bg-orange-50 text-orange-800 rounded text-sm",children:t.explanation})]},s))}),e.jsxs("div",{className:"flex flex-col items-center mt-6",children:[e.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded font-semibold text-base",onClick:()=>b(!0),children:"Get More Questions"}),e.jsx("button",{className:"mt-4 bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-semibold text-base",onClick:()=>{k(!0),C(0),T(0),L(0),D(""),$(!1),q(0),A("")},children:"Play Game"})]}),f&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-xs flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 text-center",children:"How many more questions would you like?"}),e.jsx("input",{type:"number",min:1,max:50,value:y,onChange:e=>v(e.target.value),className:"w-full p-2 rounded bg-gray-100 text-gray-900 border border-gray-300 mb-4",disabled:j}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded font-semibold",disabled:j,onClick:async()=>{const e=Number(y);if(!isNaN(e)&&e>0){w(!0);try{let s;const r=localStorage.getItem("token")||"";if("file"===t&&n){const t=new FormData;t.append("file",n),t.append("numQuestions",e.toString()),s=await fetch(`${Ot}/ai/flashcards`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:t})}else s=await fetch(`${Ot}/ai/flashcards`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({text:a,numQuestions:e})});if(!s.ok)throw new Error("Failed to get more flashcards");const i=await s.json();u(e=>[...e,...i.flashcards||[]]),b(!1)}catch(fa){p(fa.message||"Unknown error")}finally{w(!1)}}},children:j?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Adding..."]}):"Add"}),e.jsx("button",{className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-900 py-2 rounded font-semibold",disabled:j,onClick:()=>b(!1),children:"Cancel"})]})]})})]}),N&&x.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-400 mb-4 text-center",children:"Flashcard Game Mode"}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"text-lg font-semibold text-orange-500 mb-2",children:["Points: ",E," ",P>0&&e.jsxs("span",{className:"text-green-500",children:["(+",P," bonus)"]})]}),e.jsxs("div",{className:"text-md text-gray-300 mb-2",children:["Streak: ",I]})]}),O?e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 flex flex-col items-center",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:"Game Over!"}),e.jsxs("div",{className:"text-lg text-orange-500 mb-2",children:["Total Points: ",E]}),e.jsxs("div",{className:"text-md text-gray-700 mb-2",children:["Streak Bonus: ",P]}),e.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded font-semibold text-base mt-2",onClick:()=>{k(!1),C(0),A(""),T(0),L(0),D(""),$(!1),q(0)},children:"Play Again"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 flex flex-col items-center",children:[e.jsxs("div",{className:"font-semibold text-gray-900 mb-2",children:["Q",S+1,": ",x[S].question]}),e.jsx("input",{type:"text",className:"w-full p-2 rounded bg-gray-100 text-gray-900 border border-gray-300 mb-2",placeholder:"Type your answer...",value:_,onChange:e=>A(e.target.value),disabled:M||R,onKeyDown:e=>{"Enter"!==e.key||M||R||F()}}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-semibold text-base mt-2",onClick:F,disabled:M||R,children:R?"Checking...":"Submit Answer"}),z&&e.jsx("div",{className:"mt-3 p-2 rounded text-center "+(z.startsWith("Correct")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:z}),M&&!O&&e.jsx("button",{className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded font-semibold text-base",onClick:()=>{S+1<x.length?(C(S+1),A(""),D(""),U(!1)):$(!0)},children:"Next"})]})]})]})]})}
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},qt=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),Rt=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Bt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=i.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:r="",children:n,iconNode:o,...l},c)=>i.createElement("svg",{ref:c,...Bt,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:qt("lucide",r),...!n&&!Rt(l)&&{"aria-hidden":"true"},...l},[...o.map(([e,t])=>i.createElement(e,t)),...Array.isArray(n)?n:[n]])),Ut=(e,t)=>{const s=i.forwardRef(({className:s,...a},r)=>{return i.createElement(Mt,{ref:r,iconNode:t,className:qt(`lucide-${n=Pt(e),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...a});var n});return s.displayName=Pt(e),s},Ft=Ut("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Ht=Ut("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Vt=Ut("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Wt=Ut("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),Jt=Ut("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Qt=Ut("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Gt=Ut("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Yt=Ut("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Kt=Ut("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Xt=Ut("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),Zt=Ut("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),es=Ut("dumbbell",[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]]),ts=Ut("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ss=Ut("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),as=Ut("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),rs=Ut("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ns=Ut("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),is=Ut("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),os=Ut("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ls=Ut("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),cs=Ut("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),ds=Ut("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),ms=Ut("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),hs=Ut("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),xs=Ut("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),us=Ut("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gs=Ut("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ps=Ut("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),fs=Ut("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),bs=Ut("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ys=Ut("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),vs=Ut("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),js=()=>{var t;const[s,a]=i.useState(""),[r,n]=i.useState([]),[o,l]=i.useState(!1),[c,d]=i.useState(null),[m,h]=i.useState({startTime:"09:00",endTime:"17:00",breakDuration:15}),[x,u]=i.useState(null),[g,p]=i.useState(!1),f="demo-user";i.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await fetch(`https://uniconnect-learninghub-jqn0.onrender.com/api/task-scheduler/schedules?userId=${f}`);if(e.ok){const t=await e.json();n(Array.isArray(t)?t:[])}else n([])}catch(e){n([])}},y=(e,t,s,a)=>{u({title:e,content:t,field:s,taskIndex:a})},v=()=>{u(null)},j=(e,t,s)=>{if(!c)return;const a=[...c.tasks];a[e]={...a[e],[t]:s};const i={...c,tasks:a};d(i);const o=r.map(e=>e.id===c.id?i:e);n(o)},w=async(e,t)=>{try{const s=await fetch(`https://uniconnect-learninghub-backend.onrender.com/task-scheduler/download/${e}?userId=${f}`),a=await s.blob(),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${t.replace(/[^a-z0-9]/gi,"_")}.html`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(s){}},N=e=>{switch(e){case"high":return"bg-red-500/20 text-red-300 border-red-500/30";case"medium":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"low":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-800 text-gray-300 border-gray-600"}},k=t=>{switch(t){case"study":return e.jsx(Vt,{className:"h-5 w-5 text-blue-400"});case"work":return e.jsx(Jt,{className:"h-5 w-5 text-purple-400"});case"exercise":return e.jsx(es,{className:"h-5 w-5 text-green-400"});case"break":return e.jsx(Xt,{className:"h-5 w-5 text-yellow-400"});case"personal":return e.jsx(is,{className:"h-5 w-5 text-pink-400"});default:return e.jsx(ss,{className:"h-5 w-5 text-gray-400"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-4 py-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8 animate-fade-in-up",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2 flex items-center",children:[e.jsx(Wt,{className:"text-orange-500 mr-3"}),"AI Task Scheduler"]}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Tell me your daily routine and I'll create a perfect schedule for you!"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-6 mb-6 animate-fade-in-up animation-delay-200",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-white",children:[e.jsx(ms,{className:"text-orange-500"}),"Create New Schedule"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 mb-2 flex items-center",children:[e.jsx(ss,{className:"h-4 w-4 mr-2 text-blue-400"}),"Describe your day:"]}),e.jsx("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"I need to study for my math exam for 2 hours, work on my history project for 1 hour, exercise for 30 minutes, and have lunch. I also want to review my notes and do some reading...",className:"w-full h-32 p-3 bg-gray-900/50 border border-gray-700 text-white placeholder-gray-500 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none transition-all duration-300"})]}),e.jsxs("div",{className:"bg-gray-900/30 rounded-xl p-3 border border-gray-700/50",children:[e.jsxs("button",{onClick:()=>p(!g),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"h-4 w-4 mr-2 text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Schedule Preferences"})]}),g?e.jsx(Yt,{className:"h-4 w-4 text-gray-400"}):e.jsx(Gt,{className:"h-4 w-4 text-gray-400"})]}),g&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 mb-1 flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 mr-1 text-blue-400"}),"Start Time"]}),e.jsx("input",{type:"time",value:m.startTime,onChange:e=>h({...m,startTime:e.target.value}),className:"w-full p-2 bg-gray-900/50 border border-gray-700 text-white rounded-xl focus:ring-2 focus:ring-orange-500 transition-all duration-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 mb-1 flex items-center",children:[e.jsx(cs,{className:"h-4 w-4 mr-1 text-purple-400"}),"End Time"]}),e.jsx("input",{type:"time",value:m.endTime,onChange:e=>h({...m,endTime:e.target.value}),className:"w-full p-2 bg-gray-900/50 border border-gray-700 text-white rounded-xl focus:ring-2 focus:ring-orange-500 transition-all duration-300"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 mb-1 flex items-center",children:[e.jsx(Xt,{className:"h-4 w-4 mr-1 text-yellow-400"}),"Break Duration (minutes)"]}),e.jsx("input",{type:"number",value:m.breakDuration,onChange:e=>h({...m,breakDuration:parseInt(e.target.value)}),className:"w-full p-2 bg-gray-900/50 border border-gray-700 text-white rounded-xl focus:ring-2 focus:ring-orange-500 transition-all duration-300",min:"5",max:"60"})]})]})]}),e.jsx("button",{onClick:async()=>{if(s.trim()){l(!0);try{const e=await fetch(`https://uniconnect-learninghub-jqn0.onrender.com/api/task-scheduler/create?userId=${f}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInput:s,preferences:m})});if(e.ok){const t=await e.json(),s=Array.isArray(r)?[t,...r]:[t];n(s),d(t),a("")}}catch(e){}finally{l(!1)}}},disabled:o||!s.trim(),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-3 px-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg shadow-orange-500/20",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Schedule..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4"}),"Generate Schedule"]})})]})]}),e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-6 animate-fade-in-up animation-delay-400",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-white",children:[e.jsx(Qt,{className:"text-orange-500"}),"Saved Schedules"]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:[Array.isArray(r)&&r.map(t=>e.jsx("div",{className:"p-3 border rounded-xl cursor-pointer transition-all duration-300 transform hover:scale-105 "+((null==c?void 0:c.id)===t.id?"border-orange-500 bg-orange-900/20":"border-gray-700 hover:border-orange-400/50 bg-gray-700/30 hover:bg-gray-700/50"),onClick:()=>d(t),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-white",children:t.title}),e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-400",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),t.date]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsxs("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full mr-2",children:[e.jsx(Kt,{className:"h-3 w-3 inline mr-1"}),t.tasks.length," tasks"]}),e.jsxs("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded-full",children:[e.jsx(Kt,{className:"h-3 w-3 inline mr-1"}),Math.floor((t.totalDuration||0)/60),"h ",(t.totalDuration||0)%60,"m"]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),w(t.id,t.title)},className:"p-1 text-gray-400 hover:text-orange-500 transition-all duration-300 transform hover:scale-110",title:"Download schedule",children:e.jsx(Zt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{try{(await fetch(`https://uniconnect-learninghub-backend.onrender.com/task-scheduler/schedules/${e}?userId=${f}`,{method:"DELETE"})).ok&&Array.isArray(r)&&(n(r.filter(t=>t.id!==e)),(null==c?void 0:c.id)===e&&d(null))}catch(t){}})(t.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-all duration-300 transform hover:scale-110",title:"Delete schedule",children:e.jsx(fs,{className:"h-4 w-4"})})]})]})},t.id)),(!r||0===r.length)&&e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-3 text-gray-600"}),e.jsx("p",{children:"No schedules yet. Create your first one!"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:c?e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-6 animate-fade-in-up animation-delay-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:c.title}),e.jsxs("div",{className:"flex items-center text-gray-400 mt-1",children:[e.jsx(Qt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"mr-3",children:c.date}),e.jsx(Kt,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[Math.floor((c.totalDuration||0)/60),"h ",(c.totalDuration||0)%60,"m total"]})]})]}),e.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full max-w-xs sm:max-w-none sm:flex-row sm:items-center sm:justify-end",children:[e.jsxs("button",{onClick:async()=>{if(c)try{(await fetch(`https://uniconnect-learninghub-backend.onrender.com/task-scheduler/schedules/${c.id}?userId=${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok}catch(e){}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl flex items-center gap-2 w-full sm:w-auto font-semibold transition-all duration-300 transform hover:scale-105",children:[e.jsx(hs,{className:"h-4 w-4"}),"Save"]}),e.jsxs("button",{onClick:()=>w(c.id,c.title),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl flex items-center gap-2 w-full sm:w-auto font-semibold transition-all duration-300 transform hover:scale-105",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Download"]})]})]}),e.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:e.jsx("div",{className:"min-w-full inline-block align-top",children:e.jsxs("table",{className:"w-full min-w-[800px] border-collapse border border-gray-700 rounded-xl overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-700/50",children:[e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-4 w-4 mr-2 text-blue-400"}),"Start"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"h-4 w-4 mr-2 text-purple-400"}),"End"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ss,{className:"h-4 w-4 mr-2 text-orange-400"}),"Task"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{className:"h-4 w-4 mr-2 text-green-400"}),"Description"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2 text-red-400"}),"Priority"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"h-4 w-4 mr-2 text-yellow-400"}),"Category"]})}),e.jsx("th",{className:"border border-gray-700 px-3 py-3 text-left font-semibold text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Kt,{className:"h-4 w-4 mr-2 text-cyan-400"}),"Duration"]})})]})}),e.jsx("tbody",{children:(null==(t=c.tasks)?void 0:t.map((t,s)=>e.jsxs("tr",{className:("break"===t.category?"bg-yellow-900/20":"bg-gray-800/30")+" hover:bg-gray-700/50 transition-all duration-300",children:[e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsx("input",{type:"time",value:t.startTime,onChange:e=>j(s,"startTime",e.target.value),className:"w-full min-w-[70px] border-0 bg-transparent text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300"})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsx("input",{type:"time",value:t.endTime,onChange:e=>j(s,"endTime",e.target.value),className:"w-full min-w-[70px] border-0 bg-transparent text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300"})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:e=>j(s,"title",e.target.value),className:"w-full min-w-[80px] border-0 bg-transparent text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300"}),e.jsx("button",{onClick:()=>y("Task Title",t.title,"title",s),className:"flex-shrink-0 p-1 text-gray-400 hover:text-orange-500 transition-all duration-300 transform hover:scale-110",children:e.jsx(ts,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:t.description,onChange:e=>j(s,"description",e.target.value),className:"w-full min-w-[100px] border-0 bg-transparent text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300"}),e.jsx("button",{onClick:()=>y("Task Description",t.description,"description",s),className:"flex-shrink-0 p-1 text-gray-400 hover:text-orange-500 transition-all duration-300 transform hover:scale-110",children:e.jsx(ts,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsxs("select",{value:t.priority,onChange:e=>j(s,"priority",e.target.value),className:`w-full border-0 bg-gray-900 text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300 ${N(t.priority)}`,style:{color:"white"},children:[e.jsx("option",{value:"high",style:{backgroundColor:"#1f2937",color:"white"},children:"High"}),e.jsx("option",{value:"medium",style:{backgroundColor:"#1f2937",color:"white"},children:"Medium"}),e.jsx("option",{value:"low",style:{backgroundColor:"#1f2937",color:"white"},children:"Low"})]})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[k(t.category),e.jsxs("select",{value:t.category,onChange:e=>j(s,"category",e.target.value),className:"w-full border-0 bg-gray-900 text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300",style:{color:"white"},children:[e.jsx("option",{value:"study",style:{backgroundColor:"#1f2937",color:"white"},children:"Study"}),e.jsx("option",{value:"work",style:{backgroundColor:"#1f2937",color:"white"},children:"Work"}),e.jsx("option",{value:"exercise",style:{backgroundColor:"#1f2937",color:"white"},children:"Exercise"}),e.jsx("option",{value:"personal",style:{backgroundColor:"#1f2937",color:"white"},children:"Personal"}),e.jsx("option",{value:"break",style:{backgroundColor:"#1f2937",color:"white"},children:"Break"})]})]})}),e.jsx("td",{className:"border border-gray-700 px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-4 w-4 text-cyan-400"}),e.jsx("input",{type:"number",value:t.estimatedDuration,onChange:e=>j(s,"estimatedDuration",parseInt(e.target.value)),className:"w-full min-w-[60px] border-0 bg-transparent text-white text-sm focus:ring-2 focus:ring-orange-500 rounded-lg px-2 py-1 transition-all duration-300",min:"5"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"min"})]})})]},t.id)))||e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"border border-gray-700 px-3 py-8 text-center text-gray-400",children:"No tasks found in this schedule."})})})]})})})]}):e.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-12 text-center animate-fade-in-up animation-delay-300",children:[e.jsx(Qt,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Schedule Selected"}),e.jsx("p",{className:"text-gray-400",children:"Create a new schedule or select an existing one to view details."})]})})]}),o&&e.jsxs("div",{className:"fixed inset-0 bg-black/70 flex flex-col items-center justify-center z-50 animate-fade-in",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Generating your perfect schedule..."})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-2xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:x.title}),e.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white transition-colors duration-300",children:e.jsx(vs,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mb-4",children:"description"===x.field?e.jsx("textarea",{value:x.content,onChange:e=>u({...x,content:e.target.value}),className:"w-full h-32 p-3 bg-gray-900/50 border border-gray-700 text-white rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none transition-all duration-300"}):e.jsx("input",{type:"text",value:x.content,onChange:e=>u({...x,content:e.target.value}),className:"w-full p-3 bg-gray-900/50 border border-gray-700 text-white rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300"})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-700 text-white rounded-xl hover:bg-gray-600 transition-colors duration-300",children:"Cancel"}),e.jsx("button",{onClick:()=>{return e=x.content,void(x&&c&&(j(x.taskIndex,x.field,e),v()));var e},className:"px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors duration-300",children:"Save Changes"})]})]})})]}),e.jsx("style",{children:"\n        @keyframes fade-in-up {\n          from {\n            opacity: 0;\n            transform: translateY(30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .animate-fade-in-up {\n          animation: fade-in-up 0.6s ease-out;\n        }\n\n        .animate-fade-in {\n          animation: fade-in 0.3s ease-out;\n        }\n\n        @keyframes fade-in {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        .animation-delay-200 {\n          animation-delay: 0.2s;\n          animation-fill-mode: both;\n        }\n\n        .animation-delay-300 {\n          animation-delay: 0.3s;\n          animation-fill-mode: both;\n        }\n\n        .animation-delay-400 {\n          animation-delay: 0.4s;\n          animation-fill-mode: both;\n        }\n        \n        select option {\n          background-color: #1f2937;\n          color: white;\n        }\n      "})]})},ws="http://localhost:3004/api",Ns=["ðŸŽ‰","ðŸ‘","ðŸ¥³","ðŸ†","ðŸ’¡"],ks=e=>{const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t},Ss=()=>{const[t,s]=i.useState([]),[a,r]=i.useState(null),[n,o]=i.useState(!0),[l,c]=i.useState(!1),[d,m]=i.useState([]),[h,x]=i.useState([]),[u,g]=i.useState([]),[p,f]=i.useState(null),[b,y]=i.useState(null),[v,j]=i.useState(0),[w,N]=i.useState(0),[k,S]=i.useState(0),[C,_]=i.useState(!1),[A,E]=i.useState(""),[T,I]=i.useState(""),[L,z]=i.useState(null),[D,O]=i.useState(""),[$,P]=i.useState(!1),[q,R]=i.useState(""),[B,M]=i.useState(""),U=i.useRef(null),F=async()=>{o(!0);try{const e=localStorage.getItem("token")||"",t=await fetch(`${ws}/notes`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch notes");const a=((await t.json()).notes||[]).map(e=>({...e,uploadedAt:e.uploaded_at}));s(a)}catch(fa){I(fa.message||"Failed to load notes")}finally{o(!1)}};i.useEffect(()=>{F()},[]),i.useEffect(()=>{if(!a)return;(async()=>{var e;c(!0),I(""),E(""),_(!1),j(0),S(0),m([]),x([]),g([]);try{const t=localStorage.getItem("token")||"",s=(null==(e=(a.url.split("/").pop()||"").split(".").pop())?void 0:e.toLowerCase())||"";let r="";if(["txt","md"].includes(s)){const e=await fetch(a.url);r=await e.text()}else r=a.url;const n=await fetch(`${ws}/ai/matching-pairs`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({text:r,numPairs:8})});if(!n.ok)throw new Error("Failed to generate pairs from note");const i=((await n.json()).pairs||[]).map((e,t)=>({id:t,term:e.term,definition:e.definition}));m(i),x(ks(i.map(e=>({id:e.id,value:e.term,type:"term",matched:!1,selected:!1})))),g(ks(i.map(e=>({id:e.id,value:e.definition,type:"definition",matched:!1,selected:!1}))))}catch(fa){I(fa.message||"Failed to load game data.")}finally{c(!1)}})()},[a]),i.useEffect(()=>{if(null!==p&&null!==b){let e=!1;const t=h[p],s=u[b];if(t.id===s.id){e=!0;const t=h.map((e,t)=>t===p?{...e,matched:!0,selected:!1}:e),s=u.map((e,t)=>t===b?{...e,matched:!0,selected:!1}:e);x(t),g(s),j(e=>Math.min(e+1,d.length)),N(e=>e+10),E(Ns[Math.floor(Math.random()*Ns.length)]+" Match!")}else e=!0,setTimeout(()=>{x(e=>e.map((e,t)=>t===p?{...e,selected:!1}:e)),g(e=>e.map((e,t)=>t===b?{...e,selected:!1}:e))},700),E("Try again!");e&&S(e=>e+1),setTimeout(()=>{f(null),y(null)},700)}},[p,b]),i.useEffect(()=>{v===d.length&&d.length>0&&(_(!0),E("You matched all pairs! "+Ns.join(" ")))},[v,d.length]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-blue-100 flex flex-col items-center py-8 px-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-indigo-700 mb-2 text-center",children:"Matching Game"}),e.jsx("p",{className:"mb-2 text-gray-700 text-center",children:"Select a note to play! Match questions (left) to answers (right). Fewer moves = higher score."}),e.jsx("div",{className:"mb-4 text-center text-indigo-900 font-medium",children:"The games are generated from the PDF notes you upload below. Upload your notes to create new games!"}),e.jsxs("div",{className:"w-full max-w-md mb-8 bg-white/80 rounded-xl shadow p-6 flex flex-col items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-indigo-700 mb-4",children:"Upload Note"}),e.jsx("input",{type:"text",placeholder:"Enter note name...",value:D,onChange:e=>O(e.target.value),className:"w-full px-4 py-2 mb-3 border border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400",disabled:$}),e.jsx("input",{ref:U,type:"file",accept:".pdf,.doc,.docx,.txt,.md",className:"w-full mb-3",onChange:e=>{var t;const s=(null==(t=e.target.files)?void 0:t[0])||null;z(s),s&&!D&&O(s.name.split(".")[0])},disabled:$}),e.jsx("button",{onClick:async()=>{var e;if(R(""),M(""),L)if(D.trim())if(L.size>3145728)R("File size must be less than 3MB.");else{P(!0);try{const t=localStorage.getItem("token")||"",s=new FormData;s.append("file",L,L.name),s.append("name",D.trim()),s.append("contentType",L.type||"application/octet-stream"),s.append("file_type",(null==(e=L.name.split(".").pop())?void 0:e.toLowerCase())||"");const a=await fetch(`${ws}/notes/upload`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:s});if(!a.ok){const e=await a.json();throw new Error(e.message||"Upload failed")}M("Note uploaded successfully!"),O(""),z(null),U.current&&(U.current.value=""),await F()}catch(fa){R(fa.message||"Upload failed")}finally{P(!1)}}else R("Please enter a note name.");else R("Please select a file.")},disabled:$||!L||!D.trim(),className:"w-full py-2 rounded-lg font-semibold transition-all duration-300 "+(!$&&L&&D.trim()?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-indigo-200 text-indigo-400 cursor-not-allowed"),children:$?"Uploading...":"Upload Note"}),q&&e.jsx("div",{className:"mt-3 text-red-600 text-sm",children:q}),B&&e.jsx("div",{className:"mt-3 text-green-600 text-sm",children:B})]}),T&&e.jsx("div",{className:"mb-4 text-red-600 font-semibold",children:T}),e.jsx("div",{className:"mb-6 w-full max-w-2xl",children:n?e.jsx("div",{className:"text-lg text-gray-500",children:"Loading your notes..."}):e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(t=>e.jsx("button",{className:"px-4 py-2 rounded-lg font-semibold shadow transition-all "+((null==a?void 0:a.id)===t.id?"bg-indigo-600 text-white":"bg-white text-indigo-700 hover:bg-indigo-100"),onClick:()=>r(t),children:t.name},t.id))})}),l?e.jsx("div",{className:"text-lg text-gray-500",children:"Loading game..."}):a&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-2 items-center",children:[e.jsxs("span",{className:"bg-white rounded px-3 py-1 shadow text-indigo-700 font-semibold",children:["Moves: ",k]}),e.jsxs("span",{className:"bg-white rounded px-3 py-1 shadow text-pink-700 font-semibold",children:["Score: ",w]}),C&&e.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 font-bold",onClick:()=>{j(0),N(0),S(0),_(!1),E(""),f(null),y(null),x(ks(h.map(e=>({...e,matched:!1,selected:!1})))),g(ks(u.map(e=>({...e,matched:!1,selected:!1}))))},children:"Play Again"})]}),e.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-indigo-700 mb-2 text-center",children:"Questions"}),e.jsx("div",{className:"flex flex-col gap-2",children:h.map((t,s)=>e.jsx("button",{className:`w-full py-3 rounded-lg shadow text-lg font-semibold transition-all duration-200\n                      ${t.matched?"bg-green-200 text-green-900":t.selected?"bg-indigo-300 text-indigo-900":"bg-white text-indigo-700 hover:bg-indigo-100"}\n                    `,disabled:t.matched||null!==p||C,onClick:()=>{t.matched||null!==p||C||(x(e=>e.map((e,t)=>t===s?{...e,selected:!0}:e)),f(s))},children:t.value},t.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-pink-700 mb-2 text-center",children:"Answers"}),e.jsx("div",{className:"flex flex-col gap-2",children:u.map((t,s)=>e.jsx("button",{className:`w-full py-3 rounded-lg shadow text-lg font-semibold transition-all duration-200\n                      ${t.matched?"bg-green-200 text-green-900":t.selected?"bg-pink-200 text-pink-900":"bg-white text-pink-700 hover:bg-pink-100"}\n                    `,disabled:t.matched||null!==b||null===p||C,onClick:()=>{t.matched||null!==b||null===p||C||(g(e=>e.map((e,t)=>t===s?{...e,selected:!0}:e)),y(s))},children:t.value},t.id))})]})]}),e.jsx("div",{className:"h-8 text-center text-lg font-semibold text-indigo-600",children:A})]}):e.jsx("div",{className:"text-gray-500 text-lg",children:"Select a note to start the game."})]})},Cs=()=>{const[t,s]=i.useState([]),[a,r]=i.useState(!1),[n,o]=i.useState(!1),[l,c]=i.useState(!1),[d,m]=i.useState("grid"),[h,x]=i.useState(""),[u,g]=i.useState("all"),[p,f]=i.useState(!1),b=i.useRef(null),[y,v]=i.useState(""),[j,w]=i.useState({file:null,name:"",folder:"",tags:"",color_label:"#6366f1",icon:"file",file_type:"",ocr_text:""}),N=[{value:"file",icon:ss},{value:"image",icon:os},{value:"video",icon:ys},{value:"audio",icon:ds},{value:"archive",icon:Ft},{value:"document",icon:as}];i.useEffect(()=>{k()},[]);const k=async()=>{r(!0);try{const e=await fetch("/api/notes",{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}}),t=await e.json();s(t.notes||[])}catch(e){}r(!1)},S=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?f(!0):"dragleave"===e.type&&f(!1)},C=e=>{w(t=>({...t,file:e,name:e.name.split(".").slice(0,-1).join(".")||e.name,file_type:e.type})),c(!0)},_=t.filter(e=>{var t;const s=e.name.toLowerCase().includes(h.toLowerCase())||(null==(t=e.tags)?void 0:t.some(e=>e.toLowerCase().includes(h.toLowerCase()))),a="all"===u||e.folder===u;return s&&a}),A=Array.from(new Set(t.map(e=>e.folder).filter(Boolean)));return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(ss,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Notes"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{children:"Upload Note"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search notes...",value:h,onChange:e=>x(e.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm"})]}),e.jsxs("select",{value:u,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm",children:[e.jsx("option",{value:"all",children:"All Folders"}),A.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m("grid"),className:"p-2 rounded-lg transition-all duration-200 "+("grid"===d?"bg-indigo-500 text-white shadow-lg":"bg-white/80 text-slate-600 hover:bg-slate-100"),children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m("list"),className:"p-2 rounded-lg transition-all duration-200 "+("list"===d?"bg-indigo-500 text-white shadow-lg":"bg-white/80 text-slate-600 hover:bg-slate-100"),children:e.jsx(ls,{className:"h-4 w-4"})})]})]}),a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):e.jsx("div",{className:"grid"===d?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:_.map((t,s)=>{const a=(t.file_type,r=t.icon,(null==(n=N.find(e=>e.value===r))?void 0:n.icon)||ss);var r,n;return e.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-slate-200 overflow-hidden "+("list"===d?"flex items-center p-4":"p-6"),style:{animationDelay:100*s+"ms",animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsxs("div",{className:"flex items-start "+("list"===d?"flex-row space-x-4 flex-1":"flex-col space-y-4"),children:[e.jsx("div",{className:"p-3 rounded-lg flex-shrink-0",style:{backgroundColor:(t.color_label||"#6366f1")+"20"},children:e.jsx(a,{className:"h-6 w-6",style:{color:t.color_label||"#6366f1"}})}),e.jsxs("div",{className:"flex-1 "+("list"===d?"":"space-y-2"),children:[e.jsx("h3",{className:"font-semibold text-slate-800 group-hover:text-indigo-600 transition-colors duration-200",children:t.name}),t.folder&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-slate-500",children:[e.jsx(rs,{className:"h-3 w-3"}),e.jsx("span",{children:t.folder})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(t=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[e.jsx(ps,{className:"h-2 w-2 mr-1"}),t]},t)),t.tags.length>3&&e.jsxs("span",{className:"text-xs text-slate-500",children:["+",t.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-slate-500",children:[e.jsx(Qt,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(t.uploaded_at).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 "+("list"===d?"flex items-center space-x-2":"mt-4 flex justify-between items-center"),children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"p-2 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 rounded-lg transition-all duration-200",children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-green-500 hover:bg-green-50 rounded-lg transition-all duration-200",children:e.jsx(Zt,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all duration-200",children:e.jsx(fs,{className:"h-4 w-4"})})]})})]},t.id)})}),0===_.length&&!a&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ss,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No notes found"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Upload your first note to get started"}),e.jsx("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:"Upload Note"})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Upload Note"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 "+(p?"border-indigo-500 bg-indigo-50":"border-slate-300 hover:border-indigo-400 hover:bg-slate-50"),onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:e=>{e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&C(e.dataTransfer.files[0])},children:[j.file?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ss,{className:"mx-auto h-12 w-12 text-indigo-500"}),e.jsx("p",{className:"font-medium text-slate-800",children:j.file.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[(j.file.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(bs,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-slate-700",children:"Drop your file here"}),e.jsx("p",{className:"text-slate-500",children:"or click to browse"})]}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},className:"bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors duration-200",children:"Choose File"})]}),e.jsx("input",{ref:b,type:"file",onChange:e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&C(e.target.files[0])},className:"hidden",accept:".pdf,.doc,.docx,.txt,.md,.png,.jpg,.jpeg,.gif,.webp,.mp4,.mp3,.zip,.ppt,.pptx,.xls,.xlsx"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Note Name"}),e.jsx("input",{type:"text",value:j.name,onChange:e=>w(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Folder"}),e.jsx("input",{type:"text",value:j.folder,onChange:e=>w(t=>({...t,folder:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Optional folder name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tags"}),e.jsx("input",{type:"text",value:j.tags,onChange:e=>w(t=>({...t,tags:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Comma-separated tags"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Icon"}),e.jsx("select",{value:j.icon,onChange:e=>w(t=>({...t,icon:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",children:N.map(t=>e.jsx("option",{value:t.value,children:t.value.charAt(0).toUpperCase()+t.value.slice(1)},t.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex space-x-2",children:["#6366f1","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899","#64748b"].map(t=>e.jsx("button",{type:"button",onClick:()=>w(e=>({...e,color_label:t})),className:"w-8 h-8 rounded-full border-2 transition-all duration-200 "+(j.color_label===t?"border-slate-400 scale-110":"border-slate-200 hover:border-slate-300"),style:{backgroundColor:t}},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"OCR Text (Optional)"}),e.jsx("textarea",{value:j.ocr_text,onChange:e=>w(t=>({...t,ocr_text:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",rows:3,placeholder:"Add any extracted text for better searchability"})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"button",onClick:async()=>{if(!j.file)return;o(!0);const e=new FormData;e.append("file",j.file),e.append("name",j.name),e.append("folder",j.folder),e.append("tags",j.tags),e.append("color_label",j.color_label),e.append("icon",j.icon),e.append("file_type",j.file_type),e.append("ocr_text",j.ocr_text);try{(await fetch("/api/notes/upload",{method:"POST",headers:{Authorization:`Bearer ${y}`},body:e})).ok&&(await k(),c(!1),w({file:null,name:"",folder:"",tags:"",color_label:"#6366f1",icon:"file",file_type:"",ocr_text:""}))}catch(t){}o(!1)},disabled:!j.file||n,className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-lg hover:from-indigo-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:n?"Uploading...":"Upload Note"})]})]})]})}),e.jsx("style",{children:"\n        @keyframes fadeInUp {\n          from {\n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      "})]})},_s="http://localhost:3004/api",As=({notes:t,refreshNotes:s})=>{const[a,r]=i.useState("select"),[n,o]=i.useState(null),[l,c]=i.useState(null),[d,m]=i.useState(""),[h,x]=i.useState([]),[u,g]=i.useState(""),[p,f]=i.useState(!1),[b,y]=i.useState(!1),v=i.useRef(null),j=i.useRef(null);function w(e){let t=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return t=t.replace(/__(.*?)__/g,"<u>$1</u>"),t=t.replace(/\*(.*?)\*/g,"<em>$1</em>"),t}i.useEffect(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[h]);const N=async()=>{if(!u.trim())return;x([...h,{sender:"user",text:u}]),f(!0);let e={question:u};if(n?e.pdfUrl=n.url:d.trim()&&(e.pdfUrl=d.trim()),l){const e=new FormData;e.append("question",u),e.append("file",l);try{const t=localStorage.getItem("token"),s=await fetch(`${_s}/ai/study-assist`,{method:"POST",headers:t?{Authorization:`Bearer ${t}`}:void 0,body:e}),a=await s.json();x(e=>[...e,{sender:"ai",text:a.answer||"No response from AI."}])}catch(t){x(e=>[...e,{sender:"ai",text:"Error contacting AI backend."}])}}else try{const t=localStorage.getItem("token"),s=await fetch(`${_s}/ai/study-assist`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify(e)}),a=await s.json();x(e=>[...e,{sender:"ai",text:a.answer||"No response from AI."}])}catch(t){x(e=>[...e,{sender:"ai",text:"Error contacting AI backend."}])}f(!1),g("")},k=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?y(!0):"dragleave"===e.type&&y(!1)},S=async e=>{c(e),o(null),m(""),r("analyze");const t=new FormData;t.append("file",e),t.append("name",e.name),t.append("contentType",e.type),t.append("file_type","pdf");try{const e=localStorage.getItem("token");if(!(await fetch(`${_s}/notes/upload`,{method:"POST",headers:e?{Authorization:`Bearer ${e}`}:void 0,body:t})).ok)throw new Error("Upload failed");"function"==typeof s&&await s()}catch(a){}};return e.jsxs("div",{className:"w-full",children:["select"===a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("i",{className:"bx bx-cloud-upload text-orange-500 mr-2"}),"Upload New PDF"]}),e.jsxs("div",{onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),y(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){const t=e.dataTransfer.files[0];"application/pdf"===t.type&&S(t)}},className:"relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 cursor-pointer "+(b?"border-orange-500 bg-orange-500 bg-opacity-10":"border-gray-600 hover:border-gray-500"),onClick:()=>{var e;return null==(e=j.current)?void 0:e.click()},children:[e.jsx("input",{ref:j,type:"file",accept:".pdf",onChange:e=>{e.target.files&&e.target.files[0]&&S(e.target.files[0])},className:"hidden"}),e.jsxs("div",{className:"text-gray-400",children:[e.jsx("i",{className:"bx bx-file-pdf text-6xl mb-4 block text-red-500"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Drop PDF here or click to browse"}),e.jsx("p",{className:"text-sm",children:"Only PDF files are supported"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-library text-orange-500 mr-2"}),"Your PDF Documents (",t.filter(e=>e.url.endsWith(".pdf")).length,")"]}),e.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[t.filter(e=>e.url.endsWith(".pdf")).map((t,s)=>e.jsx("button",{className:"w-full bg-gray-700 hover:bg-gray-600 border border-gray-600 hover:border-orange-500 px-4 py-3 rounded-xl text-left transition-all duration-300 transform hover:scale-105 group animate-fade-in-up",style:{animationDelay:100*s+"ms"},onClick:()=>(e=>{o(e),r("analyze"),c(null),m(""),x([]),g("")})(t),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-500 bg-opacity-20 p-2 rounded-lg",children:e.jsx("i",{className:"bx bx-file-pdf text-red-500 text-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white truncate group-hover:text-orange-500 transition-colors",children:t.name}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(t.uploadedAt).toLocaleDateString()})]}),e.jsx("i",{className:"bx bx-right-arrow-alt text-gray-400 group-hover:text-orange-500 transition-colors"})]})},t.id)),0===t.filter(e=>e.url.endsWith(".pdf")).length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"bx bx-file-pdf text-6xl text-gray-600 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"No PDF documents found"}),e.jsx("p",{className:"text-gray-400",children:"Upload your first PDF to get started"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-link text-orange-500 mr-2"}),"Analyze Remote PDF"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"PDF URL"}),e.jsx("input",{type:"url",value:d,onChange:e=>m(e.target.value),placeholder:"https://example.com/document.pdf",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:ring-opacity-20 transition-all"})]}),e.jsxs("button",{className:"w-full py-3 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center space-x-2 "+(d.trim()?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg transform hover:scale-105":"bg-gray-600 text-gray-400 cursor-not-allowed"),disabled:!d.trim(),onClick:()=>{d.trim()&&(o(null),c(null),r("analyze"))},children:[e.jsx("i",{className:"bx bx-analyse"}),e.jsx("span",{children:"Analyze PDF"})]})]})]})]})]}),"analyze"===a&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-500 bg-opacity-20 p-2 rounded-lg",children:e.jsx("i",{className:"bx bx-file-pdf text-red-500 text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white truncate",children:n?n.name:l?l.name:d?new URL(d).pathname.split("/").pop():"Document"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"AI Document Analysis"})]})]}),e.jsxs("button",{className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-xl font-medium transition-all duration-300 flex items-center space-x-2",onClick:()=>{r("select"),o(null),c(null),m(""),x([]),g("")},children:[e.jsx("i",{className:"bx bx-arrow-back"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx("i",{className:"bx bx-show text-orange-500 mr-2"}),"Document Preview"]}),e.jsx("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-600",children:n?e.jsx("iframe",{src:n.url,title:n.name,className:"w-full h-96 lg:h-[500px] rounded-lg border border-gray-600"}):l?e.jsx("div",{className:"h-96 lg:h-[500px] flex items-center justify-center text-center",children:e.jsxs("div",{children:[e.jsx("i",{className:"bx bx-file-pdf text-6xl text-red-500 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"PDF Uploaded"}),e.jsx("p",{className:"text-gray-400",children:"Preview will be available after processing"})]})}):d.trim()?e.jsx("iframe",{src:d,title:"Remote PDF",className:"w-full h-96 lg:h-[500px] rounded-lg border border-gray-600"}):e.jsx("div",{className:"h-96 lg:h-[500px] flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400",children:"No document selected"})})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 flex flex-col h-[600px]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center",children:[e.jsx("i",{className:"bx bx-bot text-orange-500 mr-2"}),"Chat with AI Buddy"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Ask questions about your document"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[0===h.length&&!p&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"bx bx-message-dots text-4xl text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"Start a conversation about your document"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ask questions, request summaries, or get explanations"})]}),h.map((t,s)=>e.jsxs("div",{className:"flex items-start space-x-3 animate-fade-in-up "+("user"===t.sender?"flex-row-reverse space-x-reverse":""),children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+("user"===t.sender?"bg-orange-500":"bg-gradient-to-r from-blue-500 to-purple-500"),children:e.jsx("i",{className:`bx ${"user"===t.sender?"bx-user":"bx-bot"} text-white text-sm`})}),e.jsx("div",{className:"flex-1 max-w-[85%] "+("user"===t.sender?"text-right":"text-left"),children:e.jsx("div",{className:"inline-block px-4 py-3 rounded-2xl shadow-lg "+("user"===t.sender?"bg-orange-500 text-white rounded-tr-md":"bg-gray-700 text-white rounded-tl-md border border-gray-600"),children:"ai"===t.sender?e.jsx("div",{className:"text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:w(t.text)}}):e.jsx("p",{className:"text-sm leading-relaxed",children:t.text})})})]},s)),p&&e.jsxs("div",{className:"flex items-start space-x-3 animate-fade-in-up",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:e.jsx("i",{className:"bx bx-bot text-white text-sm"})}),e.jsx("div",{className:"bg-gray-700 px-4 py-3 rounded-2xl rounded-tl-md border border-gray-600",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:v})]}),e.jsx("div",{className:"p-6 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:u,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!p&&u.trim()&&(e.preventDefault(),N())},placeholder:"Ask about the document...",className:"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:ring-opacity-20 transition-all",disabled:p}),e.jsx("button",{onClick:N,disabled:p||!u.trim(),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center space-x-2 "+(p||!u.trim()?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg transform hover:scale-105"),children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{className:"hidden sm:inline",children:"Sending"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"Send"}),e.jsx("i",{className:"bx bx-send"})]})})]})})]})]})]})]})};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Es(){const[t,s]=i.useState([]),[a,r]=i.useState(!0),[n,o]=i.useState(null),l=async()=>{r(!0),o(null);try{const e="http://localhost:3004/api",t=localStorage.getItem("token")||"",a=await fetch(`${e}/notes`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch notes");const r=((await a.json()).notes||[]).map(e=>({...e,uploadedAt:e.uploaded_at}));s(r.filter(e=>e.url.endsWith(".pdf")))}catch(fa){s([]),o(fa.message||"Error fetching notes")}r(!1)};return i.useEffect(()=>{l()},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 px-4 py-6",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2 flex items-center",children:[e.jsx("i",{className:"bx bx-brain text-orange-500 mr-3"}),"AI Document Analyzer"]}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Upload PDFs and chat with AI to analyze your documents"})]}),e.jsx("div",{className:"max-w-7xl mx-auto",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-fade-in-up",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading your documents..."})]}):n?e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-6 py-8 rounded-2xl text-center animate-fade-in-up",children:[e.jsx("i",{className:"bx bx-error-circle text-4xl mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"mb-4",children:n}),e.jsxs("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 inline-flex items-center space-x-2",onClick:l,children:[e.jsx("i",{className:"bx bx-refresh"}),e.jsx("span",{children:"Retry"})]})]}):e.jsx("div",{className:"animate-fade-in-up animation-delay-300",children:e.jsx(As,{notes:t,refreshNotes:l})})})]})}const Ts=()=>e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Feedback"})}),Is="http://localhost:3004/api";function Ls(){const[t,s]=i.useState([]),[a,r]=i.useState(""),[n,o]=i.useState(!1),[l,c]=i.useState(""),[d,m]=i.useState(null),[h,x]=i.useState(null),[u,g]=i.useState(1),[p,f]=i.useState(!0),[b,y]=i.useState(!1),v=async(e=1,t=!1)=>{if(!n&&!b&&(p||!t)){t?y(!0):o(!0),c("");try{const a=localStorage.getItem("token")||"",r=await fetch(`${Is}/users?page=${e}&limit=20`,{headers:{Authorization:`Bearer ${a}`}});if(!r.ok)throw new Error("Failed to fetch users");const n=(await r.json()).users||[];s(t?e=>[...e,...n]:n),f(20===n.length)}catch(fa){c(fa.message||"Failed to load users")}finally{t?y(!1):o(!1)}}};i.useEffect(()=>{v(1,!1),g(1),f(!0)},[]),i.useEffect(()=>{const e=()=>{if(window.innerHeight+window.scrollY>=document.body.offsetHeight-200&&!n&&!b&&p){const e=u+1;v(e,!0),g(e)}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[u,n,b,p]);const j=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return null}})(),w=t.filter(e=>e.id!==j&&(e.full_name||e.email||"").toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"min-h-screen w-full bg-black flex flex-col items-center px-2 sm:px-4 py-4 sm:py-8",children:[h&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg animate-bounce",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:h}),e.jsx("button",{onClick:()=>x(null),className:"ml-2 text-white hover:text-gray-200",children:"Ã—"})]})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-orange-400 mb-6 sm:mb-8 text-center",children:"Find a Study Partner"}),e.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-2xl mb-8",children:[e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:a,onChange:e=>r(e.target.value),className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 mb-4"}),n?e.jsx("div",{className:"text-gray-400 text-center",children:"Loading users..."}):l?e.jsx("div",{className:"bg-red-900 text-red-300 p-2 rounded text-center",children:l}):e.jsx("ul",{className:"divide-y divide-gray-800",children:0===w.length?e.jsx("li",{className:"text-gray-400 text-center py-4",children:"No users found."}):w.map(s=>e.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-3 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:s.full_name||s.email,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold",children:(s.full_name||s.email||"?")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:s.full_name||s.email}),e.jsx("div",{className:"text-gray-400 text-xs",children:s.email})]})]}),e.jsx("button",{className:`\n                      w-full sm:w-auto\n                      px-4 py-2 rounded font-semibold text-sm transition\n                      ${d===s.id?"bg-gray-600 text-gray-300 cursor-wait":"bg-orange-500 hover:bg-orange-600 text-white"}\n                    `,style:{minWidth:"160px",marginLeft:"0",marginTop:"0.5rem",marginBottom:"0.5rem"},disabled:d===s.id,onClick:()=>(async e=>{m(e),x(null),c("");try{const s=localStorage.getItem("token")||"",a=await fetch(`${Is}/users/request-partner`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({recipientId:e})}),r=await a.json();if(a.ok){const s=t.find(t=>t.id===e),a=(null==s?void 0:s.full_name)||(null==s?void 0:s.email)||"User";x(`Request sent to ${a}. They will need to accept before you become study partners.`),c("")}else r.message&&(r.message.toLowerCase().includes("pending request already exists")||r.message.toLowerCase().includes("already your study partner")||r.message.toLowerCase().includes("already exists"))?(c("A request is already pending or this user is already your study partner."),x(null)):(c(r.message||"Failed to send request"),x(null))}catch(fa){c(fa.message||"Failed to send request"),x(null)}finally{m(null)}})(s.id),children:d===s.id?"Sending...":"Send Study Partner Request"})]},s.id))})]})]})}const zs="http://localhost:3004/api",Ds=({partnerId:t,partnerName:s})=>{const[a,r]=i.useState([]),[n,o]=i.useState(null),[l,c]=i.useState(!1),[d,m]=i.useState(""),[h,x]=i.useState(""),[u,g]=i.useState(!0),[p,f]=i.useState(!1);i.useEffect(()=>{b()},[t]);const b=async()=>{try{const e=localStorage.getItem("token"),s=await fetch(`${zs}/shared-notes/${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();r(a.notes||[])}catch(e){}finally{g(!1)}},y=e=>{e?(o(e),m(e.title),x(e.content)):(o(null),m(""),x("")),c(!0)};return u?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),e.jsx("p",{children:"Loading shared notes..."})]})}):e.jsxs("div",{className:"h-full flex bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Shared Notes"}),e.jsx("button",{onClick:()=>y(),className:"bg-orange-500 hover:bg-orange-600 text-white p-2 rounded-lg transition-colors",title:"New Note",children:e.jsx("i",{className:"bx bx-plus text-sm"})})]}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["with ",s]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:0===a.length?e.jsxs("div",{className:"p-4 text-center text-gray-400",children:[e.jsx("i",{className:"bx bx-note text-3xl mb-2"}),e.jsx("p",{className:"text-sm",children:"No shared notes yet"})]}):a.map(t=>e.jsxs("div",{onClick:()=>o(t),className:"p-4 border-b border-gray-700 cursor-pointer hover:bg-gray-700 transition-colors "+((null==n?void 0:n.id)===t.id?"bg-gray-700":""),children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-1 truncate",children:t.title}),e.jsx("p",{className:"text-gray-400 text-xs mb-2 line-clamp-2",children:t.content}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["by ",t.author_name]}),e.jsx("span",{children:new Date(t.updated_at).toLocaleDateString()})]})]},t.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:n?"Edit Note":"New Note"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white px-3 py-1 rounded transition-colors",children:"Cancel"}),e.jsx("button",{onClick:n?async()=>{if(n&&d.trim()){f(!0);try{const e=localStorage.getItem("token");(await fetch(`${zs}/shared-notes/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({title:d.trim(),content:h.trim()})})).ok&&(await b(),c(!1))}catch(e){}finally{f(!1)}}}:async()=>{if(d.trim()){f(!0);try{const e=localStorage.getItem("token");(await fetch(`${zs}/shared-notes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({title:d.trim(),content:h.trim(),partner_id:t})})).ok&&(await b(),m(""),x(""),c(!1))}catch(e){}finally{f(!1)}}},disabled:p||!d.trim(),className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white px-4 py-1 rounded transition-colors",children:p?"Saving...":"Save"})]})]})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Note title...",value:d,onChange:e=>m(e.target.value),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"}),e.jsx("textarea",{placeholder:"Start writing your shared note...",value:h,onChange:e=>x(e.target.value),className:"flex-1 w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none"})]})]}):n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:n.title}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["by ",n.author_name," â€¢ ",new Date(n.updated_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[n.can_edit&&e.jsx("button",{onClick:()=>y(n),className:"text-gray-400 hover:text-orange-500 p-2 rounded transition-colors",title:"Edit",children:e.jsx("i",{className:"bx bx-edit"})}),n.can_edit&&e.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this shared note?"))try{const t=localStorage.getItem("token");await fetch(`${zs}/shared-notes/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),await b(),(null==n?void 0:n.id)===e&&(o(null),c(!1))}catch(t){}})(n.id),className:"text-gray-400 hover:text-red-500 p-2 rounded transition-colors",title:"Delete",children:e.jsx("i",{className:"bx bx-trash"})})]})]})}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"text-white whitespace-pre-wrap",children:n.content})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"bx bx-note text-4xl mb-2"}),e.jsx("p",{children:"Select a note to view or create a new one"})]})})})]})},Os="http://localhost:3004/api",$s=({partnerId:t,partnerName:s})=>{const[a,r]=i.useState([]),[n,o]=i.useState(!1),[l,c]=i.useState(!0),[d,m]=i.useState(!1),[h,x]=i.useState({title:"",description:"",date:"",startTime:"",endTime:""});i.useEffect(()=>{u()},[t]);const u=async()=>{try{const e=localStorage.getItem("token"),s=await fetch(`${Os}/study-sessions/${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();r(a.sessions||[])}catch(e){}finally{c(!1)}},g=async(e,t)=>{try{const s=localStorage.getItem("token");await fetch(`${Os}/study-sessions/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({status:t})}),await u()}catch(s){}},p=e=>{switch(e){case"scheduled":return"text-blue-400 bg-blue-400/20";case"completed":return"text-green-400 bg-green-400/20";case"cancelled":return"text-red-400 bg-red-400/20";default:return"text-gray-400 bg-gray-400/20"}},f=e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}};return l?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),e.jsx("p",{children:"Loading study sessions..."})]})}):e.jsxs("div",{className:"h-full bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Study Sessions"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Schedule study time with ",s]})]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx("i",{className:"bx bx-plus"}),e.jsx("span",{children:"New Session"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:0===a.length?e.jsxs("div",{className:"text-center text-gray-400 mt-12",children:[e.jsx("i",{className:"bx bx-calendar text-6xl mb-4"}),e.jsx("h4",{className:"text-xl font-semibold mb-2",children:"No Study Sessions"}),e.jsxs("p",{children:["Schedule your first study session with ",s]})]}):e.jsx("div",{className:"space-y-4",children:a.map(t=>{const s=f(t.start_time),a=f(t.end_time),r=(n=t.start_time,new Date(n)>new Date);var n;return e.jsx("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-white font-semibold text-lg mb-1",children:t.title}),t.description&&e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"bx bx-calendar"}),e.jsx("span",{children:s.date})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"bx bx-time"}),e.jsxs("span",{children:[s.time," - ",a.time]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"bx bx-user"}),e.jsxs("span",{children:["by ",t.created_by_name]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(t.status)}`,children:t.status}),r&&"scheduled"===t.status&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>g(t.id,"completed"),className:"text-green-400 hover:text-green-300 p-1 rounded transition-colors",title:"Mark as completed",children:e.jsx("i",{className:"bx bx-check"})}),e.jsx("button",{onClick:()=>g(t.id,"cancelled"),className:"text-red-400 hover:text-red-300 p-1 rounded transition-colors",title:"Cancel session",children:e.jsx("i",{className:"bx bx-x"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this study session?"))try{const t=localStorage.getItem("token");await fetch(`${Os}/study-sessions/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),await u()}catch(t){}})(t.id),className:"text-gray-400 hover:text-red-400 p-1 rounded transition-colors",title:"Delete session",children:e.jsx("i",{className:"bx bx-trash"})})]})]})]})},t.id)})})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Schedule Study Session"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"bx bx-x text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Title"}),e.jsx("input",{type:"text",value:h.title,onChange:e=>x({...h,title:e.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Study session title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:e=>x({...h,description:e.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 h-20 resize-none",placeholder:"What will you study?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Date"}),e.jsx("input",{type:"date",value:h.date,onChange:e=>x({...h,date:e.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",min:(new Date).toISOString().split("T")[0]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Start Time"}),e.jsx("input",{type:"time",value:h.startTime,onChange:e=>x({...h,startTime:e.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:h.endTime,onChange:e=>x({...h,endTime:e.target.value}),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-2 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(h.title.trim()&&h.date&&h.startTime&&h.endTime){m(!0);try{const e=localStorage.getItem("token"),s=new Date(`${h.date}T${h.startTime}`),a=new Date(`${h.date}T${h.endTime}`);(await fetch(`${Os}/study-sessions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({title:h.title.trim(),description:h.description.trim(),start_time:s.toISOString(),end_time:a.toISOString(),partner_id:t})})).ok&&(await u(),x({title:"",description:"",date:"",startTime:"",endTime:""}),o(!1))}catch(e){}finally{m(!1)}}},disabled:d||!h.title.trim()||!h.date||!h.startTime||!h.endTime,className:"flex-1 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white py-2 rounded-lg transition-colors",children:d?"Creating...":"Create Session"})]})]})})]})},Ps="http://localhost:3004/api",qs=()=>{const[t,s]=i.useState([]),[a,r]=i.useState(null),[n,o]=i.useState("chat"),[l,c]=i.useState(!0),[d,m]=i.useState(!1),[h,x]=i.useState([]),[u,g]=i.useState(!1);i.useEffect(()=>{p(),f()},[]),i.useEffect(()=>{const e=()=>{document.hidden||p()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);const p=async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${Ps}/users/study-partners`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const a=(await t.json()).partners||[];s(a),a.length>0&&r(a[0])}catch(e){s([])}finally{c(!1)}},f=async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${Ps}/users`,{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();x(s.users||[])}catch(e){}},b=e=>{r(e),g(!1)};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{children:"Loading study space..."})]})}):0===t.length?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("i",{className:"bx bx-group text-6xl text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Study Partners Yet"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Add study partners to access your shared study space"}),e.jsx("a",{href:"/student/find-partner",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Find Study Partners"})]})}):e.jsxs("div",{className:"h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col lg:flex-row",children:[e.jsxs("div",{className:(a?"hidden lg:flex":"flex")+" w-full lg:w-80 bg-gray-800 border-b lg:border-b-0 lg:border-r border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-2",children:"Study Space"}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Collaborate with your study partners"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[e.jsx("h3",{className:"text-gray-400 text-xs sm:text-sm font-semibold mb-3",children:"Study Partners"}),t.map(t=>e.jsx("div",{onClick:()=>b(t),className:"p-2 sm:p-3 rounded-lg cursor-pointer mb-2 transition-colors "+((null==a?void 0:a.id)===t.id?"bg-orange-500":"hover:bg-gray-700"),style:{pointerEvents:"auto",userSelect:"none"},tabIndex:0,role:"button","aria-label":`Select study partner ${t.full_name}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||b(t)},children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("img",{src:t.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.full_name)}&background=ff6600&color=fff&size=40`,alt:t.full_name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0",style:{pointerEvents:"none"}}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-white font-medium text-sm sm:text-base truncate",style:{pointerEvents:"none"},children:t.full_name}),e.jsx("p",{className:"text-gray-400 text-xs truncate",style:{pointerEvents:"auto",userSelect:"text"},children:t.email})]})]})},t.id))]})]}),e.jsx("div",{className:(a?"flex":"hidden lg:flex")+" flex-1 flex flex-col",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-3 sm:p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("button",{onClick:()=>g(!0),className:"lg:hidden text-white hover:text-orange-500 mr-2 flex-shrink-0","aria-label":"Open sidebar",children:e.jsx("i",{className:"bx bx-menu text-2xl"})}),e.jsx("img",{src:a.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.full_name)}&background=ff6600&color=fff&size=40`,alt:a.full_name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-white font-semibold text-sm sm:text-base truncate",children:a.full_name}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Study Partner"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-700 rounded-lg p-1 flex-shrink-0",children:[{id:"chat",label:"Chat",icon:"bx-message-dots"},{id:"notes",label:"Notes",icon:"bx-note"},{id:"schedule",label:"Schedule",icon:"bx-calendar"}].map(t=>e.jsxs("button",{onClick:()=>o(t.id),className:"px-2 py-1 sm:px-4 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center space-x-1 sm:space-x-2 "+(n===t.id?"bg-orange-500 text-white":"text-gray-300 hover:text-white hover:bg-gray-600"),children:[e.jsx("i",{className:`bx ${t.icon} text-sm sm:text-base`}),e.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:["chat"===n&&e.jsx("div",{className:"h-full",children:e.jsx(Dt,{partnerId:a.id})}),"notes"===n&&e.jsx("div",{className:"h-full p-3 sm:p-6",children:e.jsx(Ds,{partnerId:a.id,partnerName:a.full_name})}),"schedule"===n&&e.jsx("div",{className:"h-full p-3 sm:p-6",children:e.jsx($s,{partnerId:a.id,partnerName:a.full_name})})]})]})}),u&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-60 flex items-start justify-start flex lg:hidden",children:[e.jsxs("div",{className:"w-72 max-w-full bg-gray-800 h-full shadow-lg flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-bold text-lg",children:"Study Partners"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white","aria-label":"Close sidebar",children:e.jsx("i",{className:"bx bx-x text-2xl"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:t.map(t=>e.jsx("div",{onClick:()=>b(t),className:"p-2 rounded-lg cursor-pointer mb-2 transition-colors "+((null==a?void 0:a.id)===t.id?"bg-orange-500":"hover:bg-gray-700"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:t.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.full_name)}&background=ff6600&color=fff&size=40`,alt:t.full_name,className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-white font-medium text-sm truncate",children:t.full_name}),e.jsx("p",{className:"text-gray-400 text-xs truncate",children:t.email})]})]})},t.id))})]}),e.jsx("div",{className:"flex-1 h-full",onClick:()=>g(!1)})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Invite to Study Group"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"bx bx-x text-xl"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:h.filter(e=>e.id!==(null==a?void 0:a.id)).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:t.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.full_name)}&background=ff6600&color=fff&size=32`,alt:t.full_name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:t.full_name}),e.jsx("p",{className:"text-gray-400 text-xs",children:t.email})]})]}),e.jsx("button",{onClick:()=>(async e=>{if(a)try{const t=localStorage.getItem("token");await fetch(`${Ps}/study-groups/invite`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({partner_id:a.id,invited_user_id:e})}),m(!1)}catch(t){}})(t.id),className:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-sm transition-colors",children:"Invite"})]},t.id))})]})})]})},Rs="http://localhost:3004/api";function Bs(){const[t,s]=i.useState([]),[a,r]=i.useState([]),[n,o]=i.useState(!1),[l,c]=i.useState(""),[d,m]=i.useState(null),[h,x]=i.useState(null),[u,g]=i.useState("notifications"),[p,f]=i.useState("all"),b=(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id}catch{return null}})(),{socket:y}=vt(b);i.useEffect(()=>{(async()=>{o(!0),c("");try{const e=localStorage.getItem("token")||"",t=await fetch(`${Rs}/users/partner-requests`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch requests");const a=await t.json();s(a.requests||[])}catch(fa){c(fa.message||"Failed to load requests")}finally{o(!1)}})(),(async()=>{try{const e=localStorage.getItem("token")||"",t=await fetch(`${Rs}/notifications`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();r(e.notifications||[])}else r([])}catch(fa){}})(),wt()},[]),i.useEffect(()=>{if(!y)return;const e=e=>{s(t=>t.some(t=>t.id===e.id)?t:[{...e},...t])};return y.on("study-partner-request",e),()=>{y.off("study-partner-request",e)}},[y]),St(y,b);const v=async(e,t)=>{m(e+t),c(""),x(null);try{const a=localStorage.getItem("token")||"",r=await fetch(`${Rs}/users/respond-partner-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({requestId:e,action:t})}),n=await r.json();r.ok?(x("accept"===t?"Study partner request accepted! You can now interact.":"Request declined."),s(t=>t.filter(t=>t.id!==e))):c(n.message||"Failed to respond to request")}catch(fa){c(fa.message||"Failed to respond to request")}finally{m(null)}},j=e=>{switch(e){case"assignment_due":return"bx-time-five";case"course_update":return"bx-book-open";case"study_session":return"bx-group";case"achievement":return"bx-trophy";case"message":return"bx-message";default:return"bx-bell"}},w=e=>{switch(e){case"urgent":return"text-red-400 bg-red-900/20";case"high":return"text-orange-400 bg-orange-900/20";case"medium":return"text-yellow-400 bg-yellow-900/20";default:return"text-blue-400 bg-blue-900/20"}},N=a.filter(e=>"unread"===p?!e.read:"high"!==p||("high"===e.priority||"urgent"===e.priority)),k=a.filter(e=>!e.read).length;return e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-black via-gray-900 to-gray-800 px-2 sm:px-4 py-4 sm:py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx("i",{className:"bx bx-bell text-orange-400"}),"Notifications",k>0&&e.jsx("span",{className:"bg-red-500 text-white text-sm px-2 py-1 rounded-full",children:k})]}),k>0&&e.jsx("button",{onClick:async()=>{try{const e=localStorage.getItem("token")||"";await fetch(`${Rs}/notifications/mark-all-read`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}}),r(e=>e.map(e=>({...e,read:!0})))}catch(e){}},className:"text-orange-400 hover:text-orange-300 text-sm font-medium",children:"Mark all as read"})]}),h&&e.jsxs("div",{className:"mb-4 bg-green-600 text-white px-4 py-3 rounded-lg shadow flex items-center gap-2",children:[e.jsx("i",{className:"bx bx-check-circle"}),h]}),l&&e.jsxs("div",{className:"mb-4 bg-red-600 text-white px-4 py-3 rounded-lg shadow flex items-center gap-2",children:[e.jsx("i",{className:"bx bx-error-circle"}),l]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-800 rounded-lg p-1 mb-6",children:[e.jsxs("button",{onClick:()=>g("notifications"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center justify-center gap-2 "+("notifications"===u?"bg-orange-500 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx("i",{className:"bx bx-bell"}),"Notifications",k>0&&"notifications"!==u&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:k})]}),e.jsxs("button",{onClick:()=>g("requests"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center justify-center gap-2 "+("requests"===u?"bg-orange-500 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx("i",{className:"bx bx-user-plus"}),"Partner Requests",t.length>0&&"requests"!==u&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:t.length})]})]}),"notifications"===u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"all",label:"All"},{key:"unread",label:"Unread"},{key:"high",label:"High Priority"}].map(({key:t,label:s})=>e.jsx("button",{onClick:()=>f(t),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors "+(p===t?"bg-orange-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:s},t))}),e.jsx("div",{className:"bg-gray-900 rounded-xl shadow-lg overflow-hidden",children:n?e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("i",{className:"bx bx-loader-alt animate-spin text-2xl mb-2"}),e.jsx("p",{children:"Loading notifications..."})]}):0===N.length?e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("i",{className:"bx bx-bell-off text-4xl mb-2"}),e.jsx("p",{children:"No notifications to show"})]}):e.jsx("div",{className:"divide-y divide-gray-800",children:N.map(t=>e.jsx("div",{className:"p-4 hover:bg-gray-800 transition-colors cursor-pointer "+(t.read?"":"bg-gray-800/50"),onClick:()=>{(async e=>{try{const t=localStorage.getItem("token")||"";await fetch(`${Rs}/notifications/${e}/read`,{method:"PUT",headers:{Authorization:`Bearer ${t}`}}),r(t=>t.map(t=>t.id===e?{...t,read:!0}:t))}catch(t){}})(t.id),t.action_url&&(window.location.href=t.action_url)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${w(t.priority)}`,children:e.jsx("i",{className:`bx ${j(t.type)} text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold "+(t.read?"text-gray-300":"text-white"),children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("urgent"===t.priority?"bg-red-600 text-white":"high"===t.priority?"bg-orange-600 text-white":"medium"===t.priority?"bg-yellow-600 text-black":"bg-gray-600 text-gray-300"),children:t.priority.toUpperCase()}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"})]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(t.created_at).toLocaleString()}),t.action_url&&e.jsxs("span",{className:"text-orange-400 text-xs flex items-center gap-1",children:["Click to view ",e.jsx("i",{className:"bx bx-right-arrow-alt"})]})]})]})]})},t.id))})})]}),"requests"===u&&e.jsx("div",{className:"bg-gray-900 rounded-xl shadow-lg p-4 sm:p-6",children:n?e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("i",{className:"bx bx-loader-alt animate-spin text-2xl mb-2"}),e.jsx("p",{children:"Loading requests..."})]}):0===t.length?e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("i",{className:"bx bx-user-plus text-4xl mb-2"}),e.jsx("p",{children:"No pending study partner requests"})]}):e.jsx("ul",{className:"divide-y divide-gray-800",children:t.map(t=>e.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.requester.avatar_url?e.jsx("img",{src:t.requester.avatar_url,alt:t.requester.full_name||t.requester.email,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-lg",children:(t.requester.full_name||t.requester.email||"?")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white text-lg",children:t.requester.full_name||t.requester.email}),e.jsx("div",{className:"text-gray-400 text-sm",children:t.requester.email}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1 flex items-center gap-1",children:[e.jsx("i",{className:"bx bx-time"}),"Requested ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-2 sm:mt-0",children:[e.jsxs("button",{className:"px-6 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl "+(d===t.id+"accept"?"opacity-60 cursor-wait":""),disabled:d===t.id+"accept",onClick:()=>v(t.id,"accept"),children:[d===t.id+"accept"?e.jsx("i",{className:"bx bx-loader-alt animate-spin"}):e.jsx("i",{className:"bx bx-check"}),d===t.id+"accept"?"Accepting...":"Accept"]}),e.jsxs("button",{className:"px-6 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl "+(d===t.id+"decline"?"opacity-60 cursor-wait":""),disabled:d===t.id+"decline",onClick:()=>v(t.id,"decline"),children:[d===t.id+"decline"?e.jsx("i",{className:"bx bx-loader-alt animate-spin"}):e.jsx("i",{className:"bx bx-x"}),d===t.id+"decline"?"Declining...":"Decline"]})]})]},t.id))})})]})})}
/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ms,Us;(Us=Ms||(Ms={})).Unimplemented="UNIMPLEMENTED",Us.Unavailable="UNAVAILABLE";class Fs extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const Hs=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},a=s.Plugins=s.Plugins||{},r=()=>null!==t?t.name:(e=>{var t,s;return(null==e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"})(e),n=e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},i=new Map;return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=r,s.handleError=t=>e.console.error(t),s.isNativePlatform=()=>"web"!==r(),s.isPluginAvailable=e=>{const t=i.get(e);return!!(null==t?void 0:t.platforms.has(r()))||!!n(e)},s.registerPlugin=(e,o={})=>{const l=i.get(e);if(l)return l.proxy;const c=r(),d=n(e);let m;const h=a=>{let r;const n=(...n)=>{const i=(async()=>(!m&&c in o?m=m="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!m&&"web"in o&&(m=m="function"==typeof o.web?await o.web():o.web),m))().then(t=>{const i=((t,a)=>{var r,n;if(!d){if(t)return null===(n=t[a])||void 0===n?void 0:n.bind(t);throw new Fs(`"${e}" plugin is not implemented on ${c}`,Ms.Unimplemented)}{const n=null==d?void 0:d.methods.find(e=>a===e.name);if(n)return"promise"===n.rtype?t=>s.nativePromise(e,a.toString(),t):(t,r)=>s.nativeCallback(e,a.toString(),t,r);if(t)return null===(r=t[a])||void 0===r?void 0:r.bind(t)}})(t,a);if(i){const e=i(...n);return r=null==e?void 0:e.remove,e}throw new Fs(`"${e}.${a}()" is not implemented on ${c}`,Ms.Unimplemented)});return"addListener"===a&&(i.remove=async()=>r()),i};return n.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(n,"name",{value:a,writable:!1,configurable:!1}),n},x=h("addListener"),u=h("removeListener"),g=(e,t)=>{const s=x({eventName:e},t),a=async()=>{const a=await s;u({eventName:e,callbackId:a},t)},r=new Promise(e=>s.then(()=>e({remove:a})));return r.remove=async()=>{await a()},r},p=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?g:x;case"removeListener":return u;default:return h(t)}}});return a[e]=p,i.set(e,{name:e,proxy:p,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),p},s.Exception=Fs,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},Vs=(e=>e.Capacitor=Hs(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),Ws=Vs.registerPlugin;class Js{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const a=this.listeners[e];if(a)a.forEach(e=>e(t));else if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Vs.Exception(e,Ms.Unimplemented)}unavailable(e="not available"){return new Vs.Exception(e,Ms.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Qs=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Gs=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ys extends Js{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Gs(s).trim(),a=Gs(a).trim(),t[s]=a}),t}async setCookie(e){try{const t=Qs(e.key),s=Qs(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),n=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${r}; ${n};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ws("CapacitorCookies",{web:()=>new Ys});const Ks=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,a,r)=>(s[a]=e[t[r]],s),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)s.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))t.set(s,a);s.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(const s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(s.body=JSON.stringify(e.data));return s};class Xs extends Js{async request(e){const t=Ks(e,e.webFetchExtra),s=((e,t=!0)=>e?Object.entries(e).reduce((e,s)=>{const[a,r]=s;let n,i;return Array.isArray(r)?(i="",r.forEach(e=>{n=t?encodeURIComponent(e):e,i+=`${a}=${n}&`}),i.slice(0,-1)):(n=t?encodeURIComponent(r):r,i=`${a}=${n}`),`${e}&${i}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,r=await fetch(a,t),n=r.headers.get("content-type")||"";let i,o,{responseType:l="text"}=r.ok?e:{};switch(n.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await r.blob(),i=await(async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>s(e),a.readAsDataURL(e)}))(o);break;case"json":i=await r.json();break;default:i=await r.text()}const c={};return r.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var Zs,ea,ta,sa;Ws("CapacitorHttp",{web:()=>new Xs}),(ea=Zs||(Zs={})).Dark="DARK",ea.Light="LIGHT",ea.Default="DEFAULT",(sa=ta||(ta={})).None="NONE",sa.Slide="SLIDE",sa.Fade="FADE";const aa=Ws("StatusBar"),ra=Ws("SplashScreen",{web:()=>k(()=>import("./web-EE66Hqjx.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>new e.SplashScreenWeb)}),na=Ws("App",{web:()=>k(()=>import("./web-BsG998Ne.js"),__vite__mapDeps([6,1,2,3,4,5])).then(e=>new e.AppWeb)});var ia,oa,la,ca;(oa=ia||(ia={})).Dark="DARK",oa.Light="LIGHT",oa.Default="DEFAULT",(ca=la||(la={})).Body="body",ca.Ionic="ionic",ca.Native="native",ca.None="none";const da=Ws("Keyboard"),ma=()=>{const[t,s]=i.useState(null),[a,r]=i.useState(!1);i.useEffect(()=>{const e=e=>{e.preventDefault(),s(e),r(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);return a?e.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Install UniConnect"}),e.jsx("p",{className:"text-xs opacity-90",children:"Add to home screen for quick access"})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:async()=>{if(!t)return;t.prompt();const{outcome:e}=await t.userChoice;"accepted"===e&&(s(null),r(!1))},className:"bg-white text-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-gray-100",children:"Install"}),e.jsx("button",{onClick:()=>{r(!1)},className:"text-white opacity-70 hover:opacity-100 text-xs",children:"âœ•"})]})]})}):null};function ha({children:t,requiredRole:s}){const[a,r]=i.useState({isChecking:!0,isAuthenticated:!1,userRole:null}),n=d();if(i.useEffect(()=>{let e=!0;const t=setTimeout(()=>{try{const t=localStorage.getItem("token"),s=localStorage.getItem("userRole");let a=!1;if(t){const e=JSON.parse(atob(t.split(".")[1])).exp,s=Math.floor(Date.now()/1e3);e&&e>s?a=!0:(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"))}e&&r({isChecking:!1,isAuthenticated:a,userRole:s})}catch(t){e&&r({isChecking:!1,isAuthenticated:!1,userRole:null})}},50);return()=>{e=!1,clearTimeout(t)}},[]),a.isChecking)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading..."})]})});if(!a.isAuthenticated)return e.jsx(f,{to:"/login",state:{from:n},replace:!0});if(s&&a.userRole!==s){const t="admin"===a.userRole?"/admin":"/student";return e.jsx(f,{to:t,replace:!0})}return t}function xa(){const[t,s]=i.useState(null),{socket:a}=vt(t);return i.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);s(e.id||e._id||null)}catch{s(null)}else s(null)},[]),i.useEffect(()=>{(async()=>{Vs.isNativePlatform()&&(await aa.setStyle({style:Zs.Default}),await aa.setBackgroundColor({color:"#007bff"}),await ra.hide(),na.addListener("backButton",({canGoBack:e})=>{e?window.history.back():na.exitApp()}),da.addListener("keyboardWillShow",()=>{document.body.classList.add("keyboard-open")}),da.addListener("keyboardWillHide",()=>{document.body.classList.remove("keyboard-open")}))})(),wt()},[]),St(a,t||""),e.jsxs(e.Fragment,{children:[e.jsx(ma,{}),e.jsx(u,{children:e.jsxs(g,{children:[e.jsx(p,{path:"/",element:e.jsx(A,{})}),e.jsx(p,{path:"/courses",element:e.jsx(_,{})}),e.jsx(p,{path:"/login",element:e.jsx(L,{})}),e.jsxs(p,{path:"/admin",element:e.jsx(ha,{requiredRole:"admin",children:e.jsx(H,{})}),children:[e.jsx(p,{index:!0,element:e.jsx(V,{})}),e.jsx(p,{path:"courses",element:e.jsx(O,{})}),e.jsx(p,{path:"lessons",element:e.jsx(U,{})}),e.jsx(p,{path:"analytics",element:e.jsx(P,{})}),e.jsx(p,{path:"quizzes",element:e.jsx(J,{})})]}),e.jsxs(p,{path:"/student",element:e.jsx(ha,{requiredRole:"student",children:e.jsx(At,{})}),children:[e.jsx(p,{index:!0,element:e.jsx(B,{})}),e.jsx(p,{path:"dashboard",element:e.jsx(B,{})}),e.jsx(p,{path:"courses",element:e.jsx(_,{})}),e.jsx(p,{path:"courses/:id",element:e.jsx(q,{})}),e.jsx(p,{path:"help",element:e.jsx("div",{children:"Help Page"})}),e.jsx(p,{path:"matching-game",element:e.jsx(Ss,{})}),e.jsx(p,{path:"feedback",element:e.jsx(Ts,{})}),e.jsx(p,{path:"chatbot",element:e.jsx(It,{})}),e.jsx(p,{path:"study-chat",element:e.jsx(Dt,{})}),e.jsx(p,{path:"flashcards",element:e.jsx($t,{})}),e.jsx(p,{path:"task-scheduler",element:e.jsx(js,{})}),e.jsx(p,{path:"notes",element:e.jsx(Cs,{})}),e.jsx(p,{path:"mynotes",element:e.jsx(Es,{})}),e.jsx(p,{path:"find-partner",element:e.jsx(Ls,{})}),e.jsx(p,{path:"study-space",element:e.jsx(qs,{})}),e.jsx(p,{path:"notifications",element:e.jsx(Bs,{})})]})]})})]})}const ua={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3004/api"},ga=document.getElementById("root");if(!ga)throw new Error("Failed to find the root element");function pa(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t),a=new Uint8Array(s.length);for(let r=0;r<s.length;++r)a[r]=s.charCodeAt(r);return a}S.createRoot(ga).render(e.jsx(o.StrictMode,{children:e.jsx(xa,{})})),(async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");"granted"!==Notification.permission&&await Notification.requestPermission();const t=null==ua?void 0:ua.VITE_VAPID_PUBLIC_KEY;if("granted"===Notification.permission&&t){const s=await e.pushManager.getSubscription()||await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pa(t)}),a=localStorage.getItem("token");a&&s&&await fetch("http://localhost:3004/api/notifications/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(s)}).catch(()=>{})}}catch(fa){}})();export{Js as W};
